Role: 顶级交互原型工程师 (HTML/JS/CSS Expert)

任务目标

构建一个单文件、高保真的 HTML5 交互原型引擎 (SportsApp v1.9)。
该原型需包含一个完全手写的“原型展示引擎”和一套“运动健康APP”的演示数据。
核心要求： 像素级还原设计规范，流畅的类原生动画体验，以及智能的交互逻辑。

1. 视觉设计系统 (Design System)

1.1 配色与风格

风格：中保真线框图 (Medium-Fidelity)，强调结构与逻辑。

画布背景：深灰色 (#1E1E1E)，带有径向渐变网格点 (radial-gradient)。

设备外壳：540px * 960px，白色背景，40px 圆角，深色阴影 (0 20px 50px rgba(0,0,0,0.5))。

UI配色：

主色调：黑白灰。

强调色：仅允许使用 红色 (#FF3B30) 用于交互热区、引注圆点和高亮状态。

字体：系统默认无衬线字体 (San Francisco / Roboto / Inter)。

1.2 布局结构

全屏画布：#canvas-container 占满屏幕，无滚动条。

舞台层：#stage 承载所有页面，通过 transform: translate/scale 控制视角。

连线层：SVG 层置于底层但逻辑上清晰可见。

UI覆盖层：固定定位的控制按钮（返回按钮左上角，语言切换右上角）。

2. 核心引擎功能 (Engine Logic)

2.1 双模式视图系统

系统需支持两种状态，并通过 data-mode 属性切换：

流程视图 (Flow Mode)：

展示：所有页面平铺在无限画布上。

连线：使用 SVG 绘制虚线箭头连接交互流程。

交互：

鼠标中键/空格键拖拽平移画布。

滚轮缩放画布。

点击页面卡片进入“单页模式”。

页面悬停时有轻微上浮效果 (scale(1.02)).

单页视图 (Single Mode)：

展示：仅显示当前活跃页面，隐藏其他所有页面（display: none）。

聚焦算法：进入时，自动计算缩放比例（保留约 15% 边距）并将目标页面居中显示在视口中央。

侧边栏：在页面右侧显示该页面的“交互说明”侧边栏（深色毛玻璃风格）。

2.2 智能路由与转场动画 (Smart Transition) - 关键点

实现一个 router(targetId) 函数，处理页面跳转：

方向判断逻辑：

Tab 切换：定义 Tab 顺序 ['home', 'profile']。若目标索引 > 当前索引，视为“前进 (Forward)”；反之视为“后退 (Backward)”。

层级导航：维护一个 historyStack。若目标页面等于栈顶前一项，视为“后退”并出栈；否则视为“前进”并入栈。

动画实现：

前进：新页面从右侧滑入 (translateX(100px) -> 0)。

后退：新页面从左侧滑入 (translateX(-100px) -> 0)。

物理曲线：使用类 iOS 弹簧曲线 cubic-bezier(0.16, 1, 0.3, 1)。

技术细节：切换时需触发 DOM Reflow 以确保动画重置播放；切换瞬间暂时禁用画布的平滑过渡，防止视窗移动与页面内滑入动画冲突。

3. 引注与说明系统 (Annotations)

红点标注：在关键 UI 元素右上角悬浮红色圆形序号 (①, ②...)。

说明侧边栏：

位于设备右侧，深色背景，左侧红线装饰。

内容结构化展示：[用途]、[交互]、[数据]、[逻辑]、[异常]。

双向高亮交互 (无抖动)：

当鼠标悬停在“红点”或“UI元素”上时，右侧对应的说明卡片高亮。

高亮样式：仅添加红色描边 (box-shadow: 0 0 0 2px #FF3B30) 和外部阴影，严禁改变元素大小、边距或背景色，确保文字绝对静止不闪动。

4. 业务内容：运动健康APP (Content)

包含三个核心页面，支持中英文切换：

首页 (Home)

UI：顶部问候语，大字号今日步数卡片，底部“开始运动”主按钮，底部导航栏。

逻辑：点击“开始运动” -> 跳转至“运动中”。

运动中 (Workout)

UI：顶部地图占位符（带轨迹线），中部实时数据网格（时间/配速），底部“暂停/结束”按钮组。

逻辑：点击“结束” -> 返回“首页”。

个人中心 (Profile)

UI：用户信息（头像/ID），功能列表（历史/设置），底部导航栏。

逻辑：底部导航栏支持与“首页”相互切换（触发左右滑入动画）。

5. 技术实现约束

单文件输出：所有 HTML, CSS, JS 必须在一个 .html 文件中。

原生实现：不依赖 Vue/React/jQuery 等任何库。使用 ES6+ Class (ProtoFlow) 管理状态。

兼容性：确保 z-index 层级正确（连线层在单页模式下隐藏，引注层级最高）。

代码结构：数据与逻辑分离。将页面结构定义在 PAGES 常量数组中，通过 JS 动态渲染 DOM。

请基于以上所有要求，生成完整的 HTML 代码。
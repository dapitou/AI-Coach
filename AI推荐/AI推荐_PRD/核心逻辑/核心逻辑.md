# 一、 核心逻辑
> 定义：AI推荐引擎的八层决策模型，实现从宏观目标到微观动作的逐级穿透与闭环进化。
> **主线** [生成计划]
> **支线** [生成课程]
> > *业务导读：这是系统的大脑结构。从最上层的“我要练什么”（计划），一层层往下拆解，直到最底层的“这个动作做几下”（动作实例化），最后通过反馈（练得怎么样）来进化大脑。*

## 第1层：计划
> 决策核心：宏观目标规划
> > *业务导读：定大方向。根据你的档案，决定给你生成一个什么样的长线计划（比如4周增肌）。*
- *输入*：`用户档案`（主要目标/功能目标/运动等级/周频/训练日）
- *决策*：目标对齐、难度匹配。
- *输出*：`计划ID`，`计划目标`，`计划功能目标`，`计划难度`，`计划周期`
       ↓
## 第2层：阶段
> 决策核心：周期化策略
> > *业务导读：定节奏。把长计划切分成“适应-进阶-突破-减载”几个阶段，防止身体练僵了。*
- *输入*：`计划周期`、`运动等级`、[2.3阶段周期分配配置]
- *决策*：划分适应期/进阶期/突破期/减载期，设定各阶段的修正系数。
- *输出*：`阶段列表`（含：阶段类型、阶段目标、阶段周期、阶段周频、强度/容量修正系数）
       ↓
## 第3层：计划阶段模板
> 决策核心：周排课逻辑
> > *业务导读：定日程。决定每周具体怎么练，是“推拉腿”循环还是“全身”循环。*
- *输入*：阶段目标、计划难度、阶段周频、[1.5计划阶段模板配置]
- *决策*：匹配最佳分化模式（如推拉腿/全身），处理频率溢出（循环/补充）。
- *输出*：`周排课表`（每日关联：基础槽位/补充槽位/休息槽位）
       ↓
       ↓ **支线** [生成课程]
       ↓
## 第4层：课程
> 决策核心：单课属性装配
> > *业务导读：定单课属性。确定今天这节课的主题（比如练胸）、时长和难度。*
- *输入 (主线)*：第3层输出的`周排课表`（槽位定义）
- *输入 (支线)*：用户直接输入的`课程参数`（目标/时长/部位）
- *通用输入*：用户状态（疲劳度/生理期）、[4.1状态适配配置]
- *决策*：疲劳干预（降阶/改项）、属性初始化（合并输入源）。
- *输出*：`课程ID`，`课程目标`，`课程类型`，`目标部位`，`课程时长`，`课程难度`
       ↓
## 第5层：环节
> 决策核心：内部结构规划
> > *业务导读：定结构。把一节课切分成热身、主训、放松，并设定好强度基准。*
- *输入*：课程类型、课程时长、[1.3结构与组装配置]、[1.1策略矩阵配置]、[1.2课程环节模板配置]、[3.2风格策略配置]
- *决策*：拆分热身/主训/放松时长，加载基准训练参数。
- *输出*：`环节列表`（含：环节类型、环节时长、训练强度、动作组数、目标RPE、循环模式、负荷策略、休息配置、关联环节模板）
       ↓
## 第6层：容量与筛选
> 决策核心：动作筛选与容量计算
> > *业务导读：选动作。从动作库里挑出最合适的动作，剔除不能做的，优先选新鲜的。*
- *输入*：环节属性、用户档案（伤病/器械）、动作库、[3.1推荐影响因子配置]
- *决策*：硬规则剔除（伤病/器械）、软规则打分（偏好/新鲜度）、容量预算计算。
- *输出*：`目标总组数`，`候选动作列表`（按得分排序）
       ↓
## 第7层：动作实例化
> 决策核心：具体执行参数
> > *业务导读：算负荷。给每个动作计算具体的重量、次数和组间休息时间。*
- *输入*：候选动作、环节强度、用户等级/1RM、[1.4等级强度系数配置]、[2.1负荷与组间策略配置]
- *决策*：计算推荐负荷（重量/次数）、生成组间策略序列。
- *输出*：`动作ID`，`执行组数`，`推荐重量`，`推荐次数`，`单组时长`，`休息时间`
       ↓
## 第8层：反馈闭环
> 决策核心：数据反哺与进化
> > *业务导读：进化。根据你练完后的反馈，调整你的能力档案，让下一次推荐更准。*
- *输入*：训练完成数据、用户反馈（RPE/替换/收藏）、[4.2反馈与自适应配置]
- *决策*：强度校准（1RM/系数调整）、偏好学习（冷宫/收藏）、平台期识别。
- *输出*：`更新后的用户档案`（1RM、偏好权重、疲劳状态）

## 需求池
> > *业务导读：未来版本规划的逻辑模块。*
1. **周期模型选择**：支持波浪周期、区块周期等高阶模型。
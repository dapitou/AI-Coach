# AI推荐配置
> > *业务导读：算法的“控制台”，运营人员可以在这里调整推荐策略和参数。*
> 定义：AI推荐引擎的参数化配置中心，采用分层架构设计，支持运营动态下发。
> 架构：全局基准 -> 策略定义 -> 推荐筛选 -> 状态适配

## 目录索引
> > *业务导读：快速查找各类配置项的入口。*
*   **一、 全局基准配置**
    *   [1.1 策略矩阵配置](#11-策略矩阵配置)
    *   [1.2 课程环节模板配置](#12-课程环节模板配置)
    *   [1.3 结构与组装配置](#13-结构与组装配置)
    *   [1.4 等级强度系数配置](#14-等级强度系数配置)
    *   [1.5 单周循环模板配置](#15-单周循环模板配置)
*   **二、 策略定义配置**
    *   [2.1 负荷与组间策略配置](#21-负荷与组间策略配置)
    *   [2.2 难度兼容策略配置](#22-难度兼容策略配置)
    *   [2.3 阶段周期分配配置](#23-阶段周期分配配置)
*   **三、 推荐与筛选配置**
    *   [3.1 推荐影响因子配置](#31-推荐影响因子配置)
    *   [3.2 风格策略配置](#32-风格策略配置)
*   **四、 状态适配与反馈**
    *   [4.1 状态适配配置](#41-状态适配配置)
    *   [4.2 反馈与自适应配置](#42-反馈与自适应配置)

## 一、 全局基准配置
> 作用：定义核心训练参数的基准值与基础结构。
> > *业务导读：系统的“出厂设置”。定义了不同目标（增肌/减脂）和等级（新手/大神）的标准训练参数。*

### 1.1 策略矩阵配置
> > *业务导读：定义不同目标和等级下的基准参数，比如增肌做几组，减脂休息多久。*
> **[开发映射]**：
> - 键1：`计划功能目标` -> 对应 `[计划属性].计划功能目标` / `[运动档案].功能目标`
> - 键2：`运动等级` -> 对应 `[运动档案].运动等级`
> 数据结构：`Map<功能目标, Map<运动等级, 环节参数配置>>`
> 用途：定义核心训练参数的基准值。

### 配置模型
```json
{
  "计划功能目标": "增肌 | 力量 | 减脂 | ...", // 来源：[计划属性].计划功能目标
  "运动等级": ["L1", "L2"] | "All",     // 来源：[运动档案].运动等级
  "环节参数": {
    "动作组数": 3,           // 来源：[环节属性].动作组数
    "休息配置": true,        // 来源：[环节属性].休息配置 (true=休息, false=不休息)
    "组间休息": 60,          // 来源：[环节属性].组间休息 (仅当休息配置=true时有效)
    "轮间休息": 90,          // 来源：[环节属性].轮间休息 (仅当休息配置=true时有效) [新增]
    "动作节奏": "2-0-2-0",   // 来源：[环节属性].动作节奏 [新增]
    "训练强度": 0.65,        // 来源：[环节属性].训练强度
    "目标RPE": 7.0,          // 来源：[环节属性].目标RPE
    "循环模式": "常规组",     // 来源：[环节属性].循环模式
    "负荷策略": "推荐",       // 来源：[环节属性].负荷策略
    "难度策略": "标准"        // 来源：[环节属性].难度策略
  }
}
```

### 默认配置表
| 计划功能目标 | 运动等级分组| 动作组数 | 动作间歇(s) | 训练强度 | 目标RPE | 循环模式 | 负荷策略 | 难度策略 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **增肌** | [L1, L2] | 3 | 60 | 0.65 | 7.0 | 常规组 | 推荐 | 标准 |
| **增肌** | [L3, L4] | 4 | 90 | 0.75 | 8.0 | 常规组 | 递增 | 进阶 |
| **增肌** | [L5] | 5 | 90 | 0.80 | 9.0 | 常规组 | 递增 | 挑战 |
| **力量** | [L1, L2] | 3 | 90 | 0.75 | 7.0 | 常规组 | 恒定 | 标准 |
| **力量** | [L3, L4] | 5 | 120 | 0.85 | 9.0 | 常规组 | 恒定 | 进阶 |
| **力量** | [L5] | 5 | 180 | 0.90 | 9.5 | 常规组 | 递增 | 挑战 |
| **减脂** | [L1, L2] | 3 | 30 | 0.55 | 6.0 | 循环组 | 计时 | 保守 |
| **减脂** | [L3, L4] | 4 | 30 | 0.65 | 8.0 | 循环组 | 计时 | 标准 |
| **减脂** | [L5] | 5 | 20 | 0.75 | 9.0 | 循环组 | 计时 | 挑战 |
| **耐力** | [L1, L2] | 3 | 45 | 0.40 | 6.0 | 超级组 | 计时 | 保守 |
| **耐力** | [L3, L4, L5]| 4 | 30 | 0.50 | 7.5 | 超级组 | 计时 | 标准 |
| **爆发** | [L1, L2] | 3 | 120 | 0.50 | 6.0 | 常规组 | 恒定 | 保守 |
| **爆发** | [L3, L4] | 4 | 150 | 0.70 | 8.0 | 常规组 | 递增 | 进阶 |
| **爆发** | [L5] | 5 | 180 | 0.85 | 9.0 | 常规组 | 递增 | 挑战 |
| **心肺** | [L1, L2] | 3 | 30 | 0.50 | 6.0 | 循环组 | 计时 | 保守 |
| **心肺** | [L3, L4] | 4 | 20 | 0.65 | 8.0 | 循环组 | 计时 | 标准 |
| **心肺** | [L5] | 5 | 15 | 0.80 | 9.5 | 循环组 | 计时 | 挑战 |
| **恢复** | All | 2 | 0 | 0.30 | 3.0 | 常规组 | 恒定 | 保守 |
| **柔韧** | All | 2 | 0 | 0.30 | 4.0 | 常规组 | 计时 | 标准 |
| **协调** | All | 3 | 60 | 0.50 | 6.0 | 常规组 | 恒定 | 标准 |
| **体态** | All | 3 | 45 | 0.50 | 6.0 | 常规组 | 计时 | 标准 |
| **激活** | All | 2 | 0 | 0.40 | 5.0 | 常规组 | 恒定 | 标准 |
| **平衡** | All | 3 | 60 | 0.50 | 6.0 | 常规组 | 恒定 | 标准 |
| **专项** | All | 3 | 90 | 0.70 | 7.5 | 常规组 | 推荐 | 标准 |

### 1.2 课程环节模板配置
> > *业务导读：定义单节课的“配方”，比如练胸日核心动作占多少，辅助动作占多少。*
> **[开发映射]**：
> - 匹配键：`策略维度` -> `[单周循环模板].基础槽位.槽位名称`
> - 筛选条件：`动作构造` -> `[动作属性].动作构造`；`动作模式` -> `[动作属性].动作模式`
> - 排序策略：`能量管理` -> 对应算法排序函数 `SortByEnergy()`
> 数据结构：`List<模板配置项>`
> 用途：定义单节课（或单环节）的“运动处方配方”。兼容所有功能目标。
> **简化原则**：通过扁平化的配置表，直接定义动作成分与比例。
> **输入维度**：
> 1. **策略维度** (最高优)：来自计划模板的特定指定 (如 "推力日")。
> 2. **解剖维度** (次优)：用户指定的训练部位 (如 "胸部")。
> 3. **生理维度** (基础)：课程的生理训练目标 (如 "减脂")。
> 4. **用户维度** (修正)：用户的运动等级 (L1-L5)、性别、年龄段。
> **匹配逻辑**：采用**最佳匹配原则**。系统根据输入维度构建特征向量，在配置池中寻找匹配度最高的骨架。
> *   优先级示例：`[策略名]` > `[部位]_[等级]` > `[部位]` > `[目标]_[等级]` > `[目标]` > `通用`。

### 默认配置表
| 模板键 (Key) | 适用等级 | 适用性别 | 核心动作 (占比≥60%) | 辅助动作 (占比≤40%) | 排序策略 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **通用** | All | All | 动作构造:复合动作(0.6) | 动作构造:孤立动作(0.4) | 能量管理 |  |

| **[策略维度 - 推拉腿分化]** |  |  |  |  |  |  |
| **推力日** | All | All | 动作模式:水平推(0.4), 动作模式:垂直推(0.4) | 主动肌:肱三头肌(0.2) | 能量管理 |
| **拉力日** | All | All | 动作模式:垂直拉(0.4), 动作模式:水平拉(0.4) | 主动肌:肱二头肌(0.2) | 能量管理 |
| **腿部日** | All | All | 动作模式:膝主导(0.4), 动作模式:髋主导(0.4) | 主动肌:小腿(0.1), 主动肌:核心(0.1) | 能量管理 |

| **[策略维度 - 上下肢分化]** |  |  |  |  |  |  |
| **上肢日** | All | All | 动作模式:水平推(0.2), 动作模式:垂直推(0.2), 动作模式:水平拉(0.2), 动作模式:垂直拉(0.2) | 主动肌:手臂(0.2) | 能量管理 |
| **下肢日** | All | All | 动作模式:膝主导(0.4), 动作模式:髋主导(0.4) | 主动肌:单腿(0.1), 主动肌:核心(0.1) | 能量管理 |

| **[解剖维度 - 部位训练]** |  |  |  |  |  |  |
| **胸部_L1** | L1,L2 | All | 主动肌:胸大肌(0.6) | 主动肌:肱三头肌(0.4) | 能量管理 |
| **胸部_L5** | L3-L5 | All | 动作模式:水平推(0.7) | 主动肌:肱三头肌(0.3) | 能量管理 |
| **臀部_女** | All | 女 | 动作模式:髋主导(0.5), 动作模式:弓步(0.3) | 主动肌:臀中肌(0.2) | 能量管理 |
| **臀部_男** | All | 男 | 动作模式:髋主导(0.6), 动作模式:膝主导(0.2) | 主动肌:臀中肌(0.2) | 能量管理 |
| **背部_L1** | L1,L2 | All | 主动肌:背阔肌(0.6) | 主动肌:肱二头肌(0.4) | 能量管理 |
| **背部_L5** | L3-L5 | All | 动作模式:垂直拉(0.4), 动作模式:水平拉(0.4) | 主动肌:肱二头肌(0.2) | 能量管理 |
| **肩部_L1** | L1,L2 | All | 主动肌:三角肌前束(0.5) | 主动肌:三角肌中束(0.5) | 能量管理 |
| **肩部_L5** | L3-L5 | All | 动作模式:垂直推(0.4), 主动肌:三角肌中束(0.3) | 主动肌:三角肌后束(0.3) | 能量管理 |
| **手臂_L1** | L1,L2 | All | 动作构造:孤立动作(0.8) | 动作构造:复合动作(0.2) | 交替执行 |
| **手臂_L5** | L3-L5 | All | 主动肌:肱三头肌(0.5) | 主动肌:肱二头肌(0.5) | 超级组 |
| **腿部_L1** | L1,L2 | All | 动作构造:固定器械(0.5), 动作模式:膝主导(0.3) | 动作模式:髋主导(0.2) | 能量管理 |
| **腿部_L5** | L3-L5 | All | 动作模式:膝主导(0.4), 动作模式:髋主导(0.4) | 主动肌:小腿(0.1), 主动肌:核心(0.1) | 能量管理 |
| **核心_L1** | L1,L2 | All | 动作模式:核心稳定(0.6) | 动作模式:旋转(0.4) | 顺序执行 |
| **核心_L5** | L3-L5 | All | 动作模式:核心稳定(0.4), 动作模式:旋转(0.4) | 动作功能:爆发(0.2) | 顺序执行 |
| **腹部** | All | All | 主动肌:腹直肌(0.5) | 主动肌:腹外斜肌(0.3) | 顺序执行 |
| **小腿** | All | All | 主动肌:腓肠肌(0.6) | 主动肌:比目鱼肌(0.4) | 顺序执行 |
| **颈部** | All | All | 主动肌:胸锁乳突肌(0.5) | 主动肌:斜方肌上束(0.5) | 顺序执行 |
| **前臂** | All | All | 主动肌:前臂肌群(1.0) | - | 顺序执行 |

| **[目标维度 - 功能训练]** |  |  |  |  |  |  |
| **减脂** | All | All | 动作功能:心肺(0.6), 动作构造:复合动作(0.2) | 动作模式:核心稳定(0.2) | 交替执行 |
| **HIIT燃脂** | All | All | 动作功率:爆发(0.4), 动作功能:心肺(0.4) | 动作模式:核心稳定(0.2) | 顺序执行 |
| **柔韧** | All | All | 动作功能:柔韧(0.8) | 动作功能:体态(0.2) | 顺序执行 |
| **平衡** | All | All | 动作功能:平衡(0.5), 动作模式:核心稳定(0.3) | 动作功能:协调(0.2) | 顺序执行 |
| **核心激活** | All | All | 动作功能:激活(0.6) | 动作模式:核心稳定(0.4) | 顺序执行 |
| **激活** | All | All | 动作功能:激活(0.6), 动作功能:平衡(0.2) | 动作功能:协调(0.2) | 顺序执行 |
| **恢复** | All | All | 动作功能:恢复(0.5), 动作功能:柔韧(0.3) | 动作功能:激活(0.2) | 顺序执行 |
| **体态** | All | All | 动作功能:体态(0.6), 动作功能:柔韧(0.2) | 动作模式:核心稳定(0.2) | 顺序执行 |

| **[混合维度 - 目标 + 部位]** |  |  |  |  |  |  |
| **肩部_L3_力量** | L3,L4 | All | 动作模式:垂直推(0.6), 动作模式:水平推(0.2) | 主动肌:三角肌后束(0.2) | 能量管理 |  |
| **腿部_L5_爆发** | L3-L5 | All | 动作模式:膝主导(0.5), 动作功率:爆发(0.3) | 主动肌:臀大肌(0.2) | 能量管理 |  |

| **[通用]** |  |  |  |  |  |  |
| **全身** | All | All | 动作构造:复合动作(0.6) | 动作构造:孤立动作(0.4) | 能量管理 | 默认全身训练 |

### 1.3 结构与组装配置
> > *业务导读：定义课程的时间结构，热身、主训、放松各占多少比例。*
> **[开发映射]**：
> - 输入：`课程时长` -> `[课程属性].课程时长`
> 用途：定义课程的宏观时间结构（环节）与微观内容填充（槽位）规则。

#### A. 环节时长分配
> 逻辑：基于课程总时长，按比例切分，但受限于最大时长（Cap），避免长课程热身过久。

| 环节类型 | 推荐占比 | 最大时长 (Cap) | 动作数量限制 (个) | 说明 |
| :--- | :--- | :--- | :--- | :--- |
| **热身** | 15% | **5 min** | **4 - 6** | 无论主训多久，热身不超过5分钟，动作不超过6个 |
| **主训** | 70% - 80% | - | - | 剩余时间全部分配给主训 |
| **放松** | 15% | **5 min** | **3 - 5** | 无论主训多久，放松不超过5分钟 |

#### B. 槽位填充策略
> 逻辑：定义主训环节内部的动作抽取规则。

| 槽位类型 | 抽取范围 (Top N) | 抽取策略 | 说明 |
| :--- | :--- | :--- | :--- |
| **核心槽位** | 3 | 权重随机 | 复合动作，构建骨架 |
| **辅助槽位** | 5 | 权重随机 | 孤立动作，填充容量 |

### 1.4 等级强度系数配置
> > *业务导读：根据用户等级设定初始负荷，新手轻一点，老手重一点。*
> 用途：MVP阶段基于“动作默认重量”和“用户等级”估算推荐负荷。
> 公式：推荐重量 = 动作默认重量 * 等级系数

| 运动等级 | 等级系数 | 说明 |
| :--- | :--- | :--- |
| **L1 (入门)** | 0.5 | 需降低门槛，建立信心 |
| **L2 (初级)** | 0.8 | 低于标准，关注动作质量 |
| **L3 (中级)** | 1.0 | 标准负荷 |
| **L4 (进阶)** | 1.2 | 增加负荷挑战 |
| **L5 (专业)** | 1.5 | 接近极限 |

### 1.5 单周循环模板配置 [新增]
> > *业务导读：定义各种周排课模式，比如“推拉腿”、“上下肢分化”等。*
> **[开发映射]**：
> - 匹配键1：`目标` -> `[阶段属性].阶段目标`
> - 匹配键2：`难度` -> `[计划属性].计划难度` (对应用户运动等级)
> - 匹配键3：`性别` -> `[运动档案].性别` (All/男/女)
> - 决策键：`周频` -> `[运动档案].每周运动频率`
> 用途：定义不同分化模式下的周排课骨架，供计划引擎匹配使用。
> 来源：[单周循环模板属性]

### 默认配置表
| ID | 名称 | 目标 | 难度 | 适用性别 | 周频 | 基础槽位 (摘要) | 补充策略 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **TPL_001** | 一分化 (全身) | 增肌 | L1 | All | 1 | [全身综合] | 循环 |
| **TPL_002** | 二分化 (上下肢) | 增肌 | L2 | All | 2 | [上肢日], [下肢日] | 循环 |
| **TPL_003** | 三分化 (推拉腿) | 增肌 | L3 | 男 | 3 | [推力日], [拉力日], [腿部日] | 循环 |
| **TPL_004** | 三分化 (臀腿侧重) | 增肌 | L3 | 女 | 3 | [臀腿日], [上肢日], [臀腿日] | 循环 |
| **TPL_005** | 四分化 (非线性) | 增肌 | L4 | All | 4 | [上肢力量], [下肢力量], [上肢肥大], [下肢肥大] | 循环 |
| **TPL_006** | 五分化 (单部位) | 增肌 | L3 | 男 | 5 | [胸], [背], [肩], [腿], [臂] | 循环 |
| **TPL_007** | 减脂循环 | 减脂 | L1 | All | 3 | [全身HIIT], [有氧耐力], [核心强化] | 循环 |

## 二、 策略定义配置
> 作用：定义具体的执行策略逻辑（如负荷如何变化、阶段如何划分）。
> > *业务导读：系统的“战术手册”。定义了具体的执行逻辑，比如重量怎么加、阶段怎么分。*

### 2.1 负荷与组间策略配置
> > *业务导读：定义每组重量怎么变，是恒定不变还是像金字塔一样递增。*
> 数据结构：`Map<负荷策略, 组序列>`
> 用途：定义不同负荷策略下的每组参数变化。

### 配置模型
```json
{
  "负荷策略": "递增", // 来源：《环节属性》.负荷策略
  "组序列": [
   {"组序号": 1, "负荷系数": 0.85, "次数增量": 2}, // 定义：第几组，强度/重量系数，次数调整值
   {"组序号": 2, "负荷系数": 0.90, "次数增量": 1},
   {"组序号": 3, "负荷系数": 1.00, "次数增量": 0}]
}
```

### 默认配置表
| 策略名称 | 组序号 | 负荷系数 | 次数增量 | 说明 |
| :--- | :--- | :--- | :--- | :--- |
| **恒定** | All | 1.0 | 0 | 所有组保持基准负荷 |
| **递增** | 1 | 0.85 | +2 | 正金字塔，重量递增 |
| **递增** | 2 | 0.90 | +1 | - |
| **递增** | 3+ | 1.0 | 0 | - |
| **递减** | 1 | 1.0 | 0 | 倒金字塔，重量递减 |
| **递减** | 2 | 0.90 | +2 | - |
| **递减** | 3+ | 0.80 | +4 | - |
| **计时** | All | - | - | 固定时长(如30s/45s)，尽可能多做 (AMRAP) |

### 2.2 难度兼容策略配置 [原2.1]
> > *业务导读：定义动作筛选的难度范围，比如新手能不能做高难度动作。*
> **[开发映射]**：
> - 输入：`难度策略` -> `[环节属性].难度策略`
> - 应用：`动作难度` -> `[动作属性].动作难度`
> 数据结构：Map<难度策略, 概率分布>
> 用途：定义动作筛选时的难度概率分布（高斯分布逻辑）。

### 配置模型
```json
{
  "难度策略": "标准",
  "概率分布": {
    "-1": 0.20, // 降1级动作的概率 (如L3用户选L2动作)
    "0": 0.60,  // 同级动作的概率
    "1": 0.20   // 升1级动作的概率
  }
}
```

### 默认配置表
| 策略名称 [键] | 范围偏移 | 概率分布 [偏移: 权重] | 说明 |
| :--- | :--- | :--- | :--- |
| **保守** | [L1, 0] | {0: 80, -1: 20} | 稳健为主，允许降级，不许升级 |
| **标准** | [-1, 1] | {0: 60, -1: 20, 1: 20} | 兼顾复习与挑战 |
| **进阶** | [0, 1] | {0: 50, 1: 50} | 增加高难度动作比例 |
| **挑战** | [0, 2] | {0: 40, 1: 40, 2: 20} | 允许跨两级挑战 |

### 2.3 阶段周期分配配置 [原2.5]
> > *业务导读：定义计划各阶段的时长比例，确保训练有周期性变化。*
> **[开发映射]**：
> - 键1：`计划功能目标` -> `[计划属性].计划功能目标`
> - 键2：`计划周期` -> `[计划属性].计划周期`
> 用途：定义不同计划周期长度下的阶段划分逻辑、时长分配及各阶段的修正系数。

### 配置模型
```json
{
  "计划功能目标": "增肌 | 力量", // [新增] 区分不同目标的周期策略
  "短周期阈值": 4,          // 定义：小于此周数视为短周期
  "阶段最小周数": 1,        // 定义：每个阶段的最短持续时间
  "阶段属性": {             // [新增] 定义各阶段的修正系数
    "适应期": {"强度系数": 0.8, "容量系数": 0.8},
    "进阶期": {"强度系数": 1.0, "容量系数": 1.0},
    "突破期": {"强度系数": 1.1, "容量系数": 0.9},
    "减载期": {"强度系数": 0.6, "容量系数": 0.6}
  },
  "标准比例": {            // 定义：长周期下的阶段时长分配权重
    "适应期": 0.25,
    "进阶期": 0.40,
    "突破期": 0.25,
    "减载期": 0.10
  },
  "短周期策略": {           // 定义：短周期下的阶段裁剪逻辑
    "1": ["进阶期"],
    "2": ["适应期", "进阶期"],
    "3": ["适应期", "进阶期", "突破期"]
  }
}
```

### 默认配置表
| 计划周期 (周) | 阶段结构 (按顺序) | 时长分配逻辑 | 说明 |
| :--- | :--- | :--- | :--- |
| **1** | 进阶期 | 100% | 快速体验 |
| **2** | 适应期 -> 进阶期 | 1:1 | 简易周期 |
| **3** | 适应期 -> 进阶期 -> 突破期 | 1:1:1 | 完整进阶 |
| **4 (标准)** | 适应期 -> 进阶期 -> 突破期 -> 减载期 | 1:1:1:1 | 标准线性周期 |
| **> 4** | 适应期 -> 进阶期 -> 突破期 -> 减载期 | 按 25%:40%:25%:10% 分配 | 长周期规划 |

## 三、 推荐与筛选配置
> 作用：定义动作筛选、打分与组装的逻辑。
> > *业务导读：系统的“选品逻辑”。定义了怎么给动作打分，怎么根据用户喜好推荐动作。*

### 3.1 推荐影响因子配置
> > *业务导读：定义动作打分的规则，新鲜的加分，厌恶的扣分。*
> 数据结构：List<影响因子>
> 用途：统一管理所有涉及推荐打分、奖惩权重的配置项。

### 默认配置表
| 分类 | 因子键 [键] | 权重/分值 | 说明 |
| :--- | :--- | :--- | :--- |
| **基础匹配** | 核心匹配奖励 | +100 | 主要部位匹配且模式符合骨架 |
| **基础匹配** | 功能热身奖励 | +50 | 热身动作的`动作功能`匹配主训`动作模式` |
| **个性化** | 风格契合奖励 | +20 | 符合用户风格偏好 |
| **个性化** | 难度适宜奖励 | +30 | 符合难度策略 |
| **个性化** | 收藏奖励 | +50 | 用户收藏了该动作 (原3.5迁移) |
| **行为反馈** | 新鲜奖励 | +60 | 过去7天未训练 (权重提升，确保轮换) |
| **行为反馈** | 探索奖励 | +30 | 历史训练次数 == 0 (新动作推荐) |
| **行为反馈** | 厌倦惩罚 | -80 | 连续3次同部位训练出现 (强力打断) |
| **行为反馈** | 冷宫惩罚 | -50 | 用户主动厌恶/替换动作 (原3.5迁移) |
| **连贯性** | 高效奖励 | +15 | 复合动作 |
| **心理激励** | 完赛信心奖励 | +20 | 在用户连续缺勤后，优先推荐用户历史完成度>95%的动作 (建立信心) |
| **连贯性** | 体位一致奖励 | +20 | 与上一动作体位相同 (减少起卧) |
| **连贯性** | 器械一致奖励 | +15 | 与上一动作器械相同 (减少调节) |
| **风控** | 难度偏离惩罚 | -50 | 超出难度兼容范围 |
| **风控** | 疲劳惩罚 | -50 | 辅助肌处于疲劳状态 |
| **风控** | 安全风控惩罚 | -100 | 大体重且低等级且高冲击 |

### 3.2 风格策略配置 [原3.3]
> > *业务导读：根据用户喜欢的风格（如激进型）调整推荐策略。*
> 数据结构：Map<喜欢的训练风格, 风格修正配置>
> 用途：定义用户偏好对筛选逻辑的修正。

### 配置模型
```json
{
  "喜欢的训练风格": "激进型", // 来源：《运动档案》.喜欢的训练风格
  "策略覆盖": {             // 定义：覆盖基准层的策略参数
  "难度策略": "进阶"       // 来源：《环节属性》.难度策略
  },
  "筛选加分": {             // 定义：动作筛选时的额外加分规则
  "目标属性": "动作功率",  // 来源：《动作属性》.属性名 (如：动作功率、动作构造)
  "目标值": "爆发",        // 来源：《动作属性》.属性值
  "分值": 20              // 定义：加分权重
  }
}
```

### 默认配置表
| 风格名称 | 策略覆盖 | 筛选加分规则 |
| :--- | :--- | :--- |
| **传统型** | - | 属性=`动作构造`, 值=`复合动作`, 分=+20 |
| **多变型** | `循环模式`="超级组" | 属性=`新鲜奖励`, 值=`True`, 分=+20 |
| **激进型** | `难度策略`="进阶" | 属性=`动作功率`, 值=`爆发`, 分=+20 |

## 四、 状态适配与反馈
> 作用：定义如何根据用户实时状态（疲劳、生理期、反馈）动态调整推荐。
> > *业务导读：系统的“应变能力”。定义了如何根据用户的疲劳、生理期和反馈来动态调整推荐。*

### 4.1 状态适配配置
> > *业务导读：根据疲劳度和生理期调整训练强度，人性化关怀。*
> 用途：统一管理基于用户实时状态（疲劳、生理期等）的参数修正与约束。

#### A. 疲劳干预
> 来源：《疲劳管理逻辑》.部位状态值

| 状态值区间 | 标签 | 强度系数 | 容量系数 | 强制约束 |
| :--- | :--- | :--- | :--- | :--- |
| **[85, 100]** | 已恢复 | 1.0 | 1.0 | - |
| **[55, 84]** | 恢复中 | 0.9 | 1.0 | - |
| **[30, 54]** | 疲劳中 | 0.8 | 0.8 | 剔除高冲击 |
| **[0, 29]** | 已力竭 | - | - | 推荐切换为“主动恢复”课程 |

#### B. 生理周期适配
> 来源：《运动档案》.生理周期

| 生理阶段 | 强度系数 | 容量系数 | 禁忌/建议 |
| :--- | :--- | :--- | :--- |
| **月经期** | 0.60 | 0.50 | 推荐剔除[高冲击, 腹部挤压, 倒立]动作；推荐[瑜伽, 拉伸] |
| **卵泡期** | 1.05 | 1.10 | 雌激素上升，耐受度高，适合上强度 |
| **排卵期** | 1.10 | 0.90 | 力量峰值，但ACL损伤风险增加，需控制爆发性动作 |
| **黄体期** | 0.90 | 1.00 | 体温升高，心率漂移，适合稳态训练 |

### 4.2 反馈与自适应配置 [原4.3]
> > *业务导读：定义什么时候该调整强度，什么时候该判定为平台期。*
> 用途：定义反馈闭环中的判定阈值与触发策略。

| 参数/条件 | 阈值/动作 | 说明 |
| :--- | :--- | :--- |
| **RPE偏差阈值** | 2 | |用户RPE - 目标RPE| > 2 时触发强度校准 |
| **平台期判定次数** | 3 | 连续 3 次负荷未提升 |
| **有效训练完成度** | 0.90 | 判定平台期时，要求课程完成度 > 90% |
| **厌恶判定次数** | 3 | 主动替换同一动作 > 3 次 |
| **平台期干预策略** | 连续3次未提升 -> `负荷策略`="波浪" | 通过波动强度打破适应 |
| **平台期干预策略** | 连续5次未提升 -> `动作组数`*1.2 | 增加容量积累代谢压力 |
| **过度训练干预** | 连续2次RPE>9 -> `负荷策略`="减载" | 推荐减载 |

## 需求池
> > *业务导读：未来版本规划的配置项。*
1. **波浪负荷策略**：支持波浪周期的负荷变化配置。
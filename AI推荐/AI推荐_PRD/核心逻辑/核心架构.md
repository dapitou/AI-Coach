# 一、 核心架构
> 定义：AI推荐引擎的八层决策模型，实现从宏观目标到微观动作的逐级穿透与闭环进化。
> **主线** [生成计划]
> **支线** [生成课程]

## 第1层：计划
> 决策核心：宏观目标规划
- *输入*：`用户档案`（主要目标/功能目标/运动等级/周频/训练日）
- *决策*：目标对齐、难度匹配、周期模型选择（线性/波浪）。
- *输出*：`计划ID`，`计划目标`，`计划功能目标`，`计划难度`，`计划周期`，`周期模型`
       ↓
## 第2层：阶段
> 决策核心：周期化策略
- *输入*：`计划周期`、`运动等级`、[2.3阶段周期分配配置]
- *决策*：划分适应期/进阶期/突破期/减载期，设定各阶段的修正系数。
- *输出*：`阶段列表`（含：阶段类型、阶段目标、阶段周期、阶段周频、强度/容量修正系数）
       ↓
## 第3层：计划阶段模板
> 决策核心：周排课逻辑
- *输入*：阶段目标、计划难度、阶段周频、[1.5计划阶段模板配置]
- *决策*：匹配最佳分化模式（如推拉腿/全身），处理频率溢出（循环/填充）。
- *输出*：`周排课表`（每日关联：基础槽位/填充槽位/休息槽位）
       ↓
       ↓ **支线** [生成课程]
       ↓
## 第4层：课程
> 决策核心：单课属性装配
- *输入 (主线)*：第3层输出的`周排课表`（槽位定义）
- *输入 (支线)*：用户直接输入的`课程参数`（目标/时长/部位）
- *通用输入*：用户状态（疲劳度/生理期）、[4.1状态适配配置]
- *决策*：疲劳干预（降阶/改项）、属性初始化（合并输入源）。
- *输出*：`课程ID`，`课程目标`，`课程类型`，`目标部位`，`课程时长`，`课程难度`
       ↓
## 第5层：环节
> 决策核心：内部结构规划
- *输入*：课程类型、课程时长、[1.3结构与组装配置]、[1.1策略矩阵配置]、[1.2课程环节模板配置]、[3.2风格策略配置]
- *决策*：拆分热身/主训/放松时长，加载基准训练参数。
- *输出*：`环节列表`（含：环节类型、环节时长、训练强度、动作组数、目标RPE、循环模式、负荷策略、休息配置、关联环节模板）
       ↓
## 第6层：容量与筛选
> 决策核心：动作筛选与容量计算
- *输入*：环节属性、用户档案（伤病/器械）、动作库、[3.1推荐影响因子配置]
- *决策*：硬规则剔除（伤病/器械）、软规则打分（偏好/新鲜度）、容量预算计算。
- *输出*：`目标总组数`，`候选动作列表`（按得分排序）
       ↓
## 第7层：动作实例化
> 决策核心：具体执行参数
- *输入*：候选动作、环节强度、用户等级/1RM、[1.4等级强度系数配置]、[2.1负荷与组间策略配置]
- *决策*：计算推荐负荷（重量/次数）、生成组间策略序列。
- *输出*：`动作ID`，`执行组数`，`推荐重量`，`推荐次数`，`单组时长`，`休息时间`
       ↓
## 第8层：反馈闭环
> 决策核心：数据反哺与进化
- *输入*：训练完成数据、用户反馈（RPE/替换/收藏）、[4.2反馈与自适应配置]
- *决策*：强度校准（1RM/系数调整）、偏好学习（冷宫/收藏）、平台期识别。
- *输出*：`更新后的用户档案`（1RM、偏好权重、疲劳状态）
# AI运动推荐系统 - 用户故事 (User Stories)
> **文档用途**：定义系统功能边界，辅助开发设计架构，作为验收测试（UAT）的基准。
> **优先级标记**：[P1] = MVP核心功能；[P2] = 进阶智能；[P3] = 专家系统。

## 1. 角色画像 (Personas)
| 角色 | 代号 | 特征描述 | 典型诉求 |
| :--- | :--- | :--- | :--- |
| **新手小白** | `User-A` | 无训练基础，怕受伤，家里器械少 | "别让我思考，告诉我练什么，别让我受伤。" |
| **进阶铁粉** | `User-B` | 有训练经验，关注增肌/突破，器械全 | "我要科学的周期，我要突破瓶颈，我要精准的负荷。" |
| **伤病用户** | `User-C` | 膝盖/腰部有旧伤，大体重 | "我想运动，但不能做深蹲，别给我推高冲击动作。" |
| **AI教练** | `System` | 系统的拟人化逻辑核心 | "我需要计算疲劳、筛选动作、动态排课。" |
| **运营人员** | `Admin` | 内容与策略管理者 | "我要灵活配置动作库和算法策略，不依赖发版。" |

---

## 2. 史诗与故事 (Epics & Stories)

### Epic 1: 数字化档案 (Onboarding)
> **目标**：建立精准的用户数字孪生，收集算法所需的约束条件。

- **Story 1.1 [基础画像] [P1]**
  - **作为** `User-A`，我希望输入身高、体重、性别、生日，**以便**系统计算我的BMI和基础代谢，评估我的身体基础状态。
  - *验收标准*：系统自动计算BMI，若BMI>28自动标记为“大体重”（触发风控）。

- **Story 1.2 [伤病规避] [P1]**
  - **作为** `User-C`，我希望在档案中点选我的疼痛部位（如“膝盖”），**以便**系统在生成计划时绝对不包含深蹲、跳跃等加重伤痛的动作。
  - *验收标准*：生成的任何课程中，不得出现`疼痛部位`包含“膝盖”的动作。

- **Story 1.3 [器械约束] [P1]**
  - **作为** `User-A`，我希望勾选“没有哑铃”和“没有健身凳”，**以便**系统只推荐自重或我现有器械能完成的动作。
  - *验收标准*：生成的课程中，所有动作的`动作器械`必须在用户拥有的器械列表内。

- **Story 1.4 [生理周期] [P2]**
  - **作为** 女性用户，我希望记录我的生理周期（如“月经期”），**以便**系统自动在这几天降低训练强度，推荐舒缓的瑜伽或拉伸。
  - *验收标准*：月经期期间，强度系数自动降至0.6，且剔除所有高冲击动作。

---

### Epic 2: 宏观计划生成 (Macro-Planning)
> **目标**：生成符合运动科学周期的长线方案。

- **Story 2.1 [周期化模型] [P1]**
  - **作为** `User-B`，我希望获得一个长达4周的计划，包含“适应-进阶-突破-减载”的节奏，**以便**我能科学地渐进超负荷，而不是每天重复一样的训练。
  - *验收标准*：生成的计划包含4个阶段，且各阶段的强度系数和组数符合策略矩阵定义。

- **Story 2.2 [动态模板匹配] [P1]**
  - **作为** `System`，我需要根据用户的周频（如3练）和目标（增肌），自动匹配最合适的“动态循环模板”（如“推拉腿”或“全身循环”）。
  - *验收标准*：周频=3时匹配3分化模板；周频=5时匹配5分化模板或3分化+填充。

- **Story 2.3 [日程微调] [P1]**
  - **作为** `User-A`，我希望将默认的“周一/三/五”训练调整为“周二/四/六”，**以便**适应我的工作节奏。
  - *验收标准*：调整后，计划中的槽位逻辑保持不变，仅日期平移。

---

### Epic 3: 每日课程生成 (Micro-Generation)
> **目标**：基于当日状态，动态生成具体的训练内容。

- **Story 3.1 [疲劳干预] [P1]**
  - **作为** `System`，在生成今日课程前，我会检查用户各部位的“肌肉状态值”。如果“胸部”处于“力竭”状态（<30），我会强制替换今日的推胸课程为“主动恢复”或“腿部训练”。
  - *验收标准*：力竭部位不被安排为主训部位。

- **Story 3.2 [智能筛选] [P2]**
  - **作为** `System`，在填充动作槽位时，我会优先选择“新鲜奖励”高（近期没练过）且“匹配度”高（符合骨架）的动作，**以便**保持训练的趣味性和科学性。
  - *验收标准*：同一部位连续3次训练不出现完全相同的动作序列。

- **Story 3.3 [生物力学热身] [P3]**
  - **作为** `System`，如果主训内容是“大重量深蹲”，我会自动推荐“髋关节激活”和“踝关节灵活性”作为热身动作，而不是通用的跑步。
  - *验收标准*：热身动作的`功能标签`与主训动作的`动作模式`强关联。

- **Story 3.4 [超级组编排] [P3]**
  - **作为** `User-B`，我希望在“耐力/减脂”阶段体验“超级组”训练（如卧推+划船交替做），**以便**节省时间并提升代谢。
  - *验收标准*：生成的课程结构中，主动肌与拮抗肌动作成对出现，且组间无休息。

---

### Epic 4: 训练执行与辅导 (Execution)
> **目标**：提供精准的执行指导和负荷建议。

- **Story 4.1 [负荷推荐] [P1]**
  - **作为** `User-A`，我希望系统明确告诉我这一组该用“5kg”还是“10kg”，**以便**我不需要自己瞎猜重量。
  - *验收标准*：推荐重量 = 1RM * 强度系数，且在用户设定的器械范围内。

- **Story 4.2 [组间策略] [P2]**
  - **作为** `User-B`，在“突破期”，我希望系统指导我采用“金字塔式”训练（重量递增，次数递减），**以便**冲击极限力量。
  - *验收标准*：每组的推荐重量和次数动态变化，符合“递增”策略配置。

- **Story 4.3 [实时纠错] [P3]**
  - **作为** `User-A`，如果我深蹲时“膝盖内扣”，希望系统能通过摄像头识别并语音提示我“膝盖向外打开”，**以便**防止受伤。
  - *验收标准*：触发CV识别，命中错误ID，播放对应的纠错语音。

---

### Epic 5: 闭环与进化 (Feedback Loop)
> **目标**：基于反馈数据，让系统越用越懂用户。

- **Story 5.1 [RPE反馈] [P2]**
  - **作为** `User-A`，训练结束后，我希望告诉系统“今天太累了”（RPE=9），**以便**系统自动降低下一次的训练难度。
  - *验收标准*：收到RPE>目标值+2时，下一次同部位训练的1RM估算值下调5%。

- **Story 5.2 [疲劳计算] [P1]**
  - **作为** `System`，用户训练结束后，我会根据他实际完成的容量（重量x次数），扣除对应肌群的“状态值”，**以便**为明天的排课提供依据。
  - *验收标准*：训练后查看数据库，相关部位状态值正确下降。

- **Story 5.3 [平台期干预] [P3]**
  - **作为** `System`，如果发现用户连续3周负荷没有提升，我会判定为“平台期”，并建议用户下周进行“减载”或更换训练模式。
  - *验收标准*：检测到平台期指标，自动触发弹窗建议，并调整后续计划参数。

- **Story 5.4 [缺勤回归] [P3]**
  - **作为** `User-A`，如果我生病了一周没练，我希望系统能智能询问我“是否顺延计划”或“跳过并降低难度”，而不是让我面对堆积如山的过期课程。
  - *验收标准*：缺勤>3天，启动回归策略，自动调整日程。

---

### Epic 6: 运营与配置 (Admin)
> **目标**：提供灵活的后台管理能力。

- **Story 6.1 [动作打标] [P1]**
  - **作为** `Admin`，我希望在后台批量给动作打上“疼痛部位”、“器械”、“冲击等级”标签，**以便**算法能正确筛选。
  - *验收标准*：后台支持多选标签，前端API能正确读取。

- **Story 6.2 [策略热更] [P2]**
  - **作为** `Admin`，我希望在后台调整“增肌”目标的默认组数（从3组改为4组），**以便**快速优化课程体验而不需要发版。
  - *验收标准*：修改配置JSON后，新生成的课程立即生效。

---

## 3. 验收场景示例 (Acceptance Scenarios)

### 场景 A：膝盖痛的新手 (P1)
1. **前置**：用户档案选择“膝盖痛”、“无器械”。
2. **动作**：生成“下肢塑形”课程。
3. **预期**：
   - 课程中**无**深蹲、跳跃、弓步蹲。
   - 课程中**包含**侧卧抬腿、臀桥（低冲击、地面动作）。
   - 所有动作均为自重。

### 场景 B：追求强度的老手 (P2)
1. **前置**：用户处于“突破期”，昨日练了胸（胸部疲劳度=40）。
2. **动作**：生成今日“推力日”课程。
3. **预期**：
   - 系统检测到胸部疲劳，触发干预。
   - 方案1（强干预）：将主训部位改为“肩部主导”，减少胸部参与。
   - 方案2（弱干预）：保留胸部动作，但强度系数降至0.8，且不安排力竭组。

### 场景 C：平台期突破 (P3)
1. **前置**：用户连续3次卧推重量卡在60kg，RPE反馈均为9。
2. **动作**：生成下一次胸部训练。
3. **预期**：
   - 系统识别“平台期”。
   - 负荷策略自动从“推荐（线性）”切换为“波浪（波动）”。
   - 或者提示用户“建议本周进行减载休息”。
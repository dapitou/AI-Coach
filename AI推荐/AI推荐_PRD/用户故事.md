# 健身AI推荐系统需求文档

## 介绍

本文档规定了健身AI推荐系统的需求，该系统基于用户的运动档案、疲劳状态、训练目标和生理特征，为用户提供个性化的训练计划和课程推荐。系统采用七层架构（计划→阶段→单周模板→课程→环节→动作容量→动作），通过智能算法实现科学的训练安排和疲劳管理。

## 术语表

- **运动档案**: 包含用户基础数据、偏好设置和目标设定的完整用户画像
- **疲劳管理系统**: 监控和管理肌肉疲劳状态的核心算法模块
- **单周循环模板**: 定义单周内训练内容安排逻辑的配置模板
- **课程生成引擎**: 基于用户需求和状态自动生成个性化训练课程的系统
- **计划生成引擎**: 基于用户目标自动生成长期训练计划的系统
- **肌肉状态值**: 表示肌肉疲劳程度的数值（0-100）
- **部位状态值**: 表示身体部位整体疲劳程度的数值（0-100）
- **训练容量**: 通过负荷×次数×组数计算的训练量指标
- **MET值**: 代谢当量，用于计算有氧训练的虚拟容量
- **RPE**: 自觉费力程度评分（1-10）
- **训练范式**: 课程的底层逻辑分类（抗阻/间歇/流式），决定参数配置基准
- **策略矩阵**: 基于目标和等级的训练参数配置表

## 需求

### 1. 基础支撑层

#### 需求1：运动档案管理

**用户故事：** 作为健身用户，我希望系统能够管理我的完整运动档案，以便推荐引擎能够基于我的身体状况、偏好和目标提供个性化的训练建议。

#### 验收标准

1. 当新用户注册时，系统应创建包含基础数据、偏好设置和目标设定的运动档案
2. 当用户更新身高、体重时，系统应自动重新计算BMI并更新相关推荐参数
3. 当用户年龄变化时，系统应自动更新最大心率（MHR = 208 - 0.7 × 年龄）
4. 当用户选择疼痛部位时，系统应在动作推荐中剔除可能引起疼痛的动作
5. 当用户设置"没有的器械"时，系统应在课程生成中排除需要该器械的动作
6. 当用户设定目标时，系统应支持选择"功能目标"（如爆发、耐力）以细化训练方向
7. 当用户开始训练前，系统应记录用户的"主观疲劳度"（1-10）以修正当日负荷

#### 需求2：动作库管理与筛选

**用户故事：** 作为系统管理员，我希望维护完整的动作库，并确保推荐算法能够基于用户条件正确筛选动作。

#### 验收标准

1. 当动作配置主要部位时，系统应自动关联对应的主动肌和拮抗肌
2. 当动作设置疼痛部位时，系统应在用户有相应疼痛时剔除该动作
3. 当动作标记为高冲击等级时，系统应对大体重用户进行安全规避
4. 当动作需要特定器械时，系统应检查用户的器械配置进行筛选
5. 当动作设置MET值时，系统应能够计算有氧训练的虚拟容量和卡路里消耗

#### 需求3：力量能力测评

**用户故事：** 作为健身用户，我希望通过标准化的动作测试评估我的力量水平，以便获得更精准的负荷推荐。

#### 验收标准

1. 当用户进行测评时，系统应支持胸、背、肩、臂、臀腿、核心六大部位的标准动作测试
2. 当用户完成次极限测试后，系统应使用公式估算1RM值
3. 当测评数据更新时，系统应将单一动作的成绩映射到对应肌群的全局能力值（如深蹲->臀部+腿部）

### 2. 状态与风控层

#### 需求4：肌肉疲劳监控系统

**用户故事：** 作为健身用户，我希望系统能够智能监控我的肌肉疲劳状态，以便避免过度训练并优化恢复安排。

#### 验收标准

1. 当用户完成训练时，系统应根据训练容量和疲劳敏感度计算肌肉状态值下降
2. 当用户休息时，系统应根据恢复速率和时长计算肌肉状态值上升
3. 当部位状态值在85-100时，系统应允许高强度训练和1RM测试
4. 当部位状态值在30-54（疲劳中）时，系统应剔除高冲击动作并推荐降级训练
5. 当部位状态值在0-29（已力竭）时，系统应仅允许主动恢复类训练（如拉伸）

#### 需求5：疲劳状态实时计算

**用户故事：** 作为健身用户，我希望系统能够实时准确计算我的疲劳状态，为训练安排提供科学依据。

#### 验收标准

1. 当计算肌肉状态下降时，系统应使用公式：(总容量÷500)×疲劳敏感度×个体易疲劳系数×肌肉角色系数
2. 当计算肌肉状态恢复时，系统应采用分阶段恢复速率（0-4h快，24-72h慢，>72h超量恢复）
3. 当用户为女性时，系统应将个体易疲劳系数设为1.1
4. 当用户年龄>35时，系统应将个体恢复效率系数设为0.9
5. 当计算部位状态值时，系统应使用各肌肉状态值的加权平均

#### 需求6：训练安全与风险控制

**用户故事：** 作为健身用户，我希望系统能够确保训练的安全性，避免因不当训练导致的伤害风险。

#### 验收标准

1. 当用户疼痛部位包含膝盖或脚踝时，系统应剔除所有高冲击动作且不可豁免
2. 当用户BMI≥28且非高级用户时，系统应剔除高冲击动作以保护关节
3. 当部位状态值<30时，系统应禁止该部位进行任何主动训练
4. 当用户连续多次超过目标RPE时，系统应主动降低训练强度
5. 当检测到异常训练模式时，系统应提供安全提醒和建议调整

#### 需求7：个体差异修正系统

**用户故事：** 作为健身用户，我希望系统能够考虑我的个体差异，提供更精准的个性化训练建议。

#### 验收标准

1. 当用户为新手时，系统应将个体易疲劳系数设为1.3以反映神经适应差
2. 当用户为高手时，系统应将个体易疲劳系数设为0.8，恢复效率系数设为1.2
3. 当用户年龄>50时，系统应将个体恢复效率系数设为0.8
4. 当检测到用户睡眠不足时，系统应将个体恢复效率系数设为0.7
5. 当用户性别为女性时，系统应在同绝对容量下适当增加疲劳感修正

### 3. 计划生成层 (Plan Engine)

#### 需求8：智能计划生成

**用户故事：** 作为健身用户，我希望系统能够生成符合我目标和频率的长期训练计划，并自动安排阶段性进阶。

#### 验收标准

1. 当用户选择计划周期时，系统应按比例分配四个阶段：适应期(25%)→进阶期(35%)→突破期(25%)→减载期(15%)
2. 当计划周期<4周时，系统应每个阶段1周，不足4周从后往前减少阶段
3. 当用户周频>模板周频时，系统应根据补充策略（循环/补充/随机）填充溢出的训练日
4. 当无满足频率兼容性的模板时，系统应降级匹配最低频模板并提示用户
5. 当生成计划时，系统应根据用户档案的功能目标匹配相应的单周循环模板

#### 需求9：单周循环模板匹配算法

**用户故事：** 作为健身用户，我希望系统能够智能匹配最适合我的单周循环模板，并根据我的频率进行动态调整。

#### 验收标准

1. 当匹配模板时，系统应优先选择目标一致、难度适配、频率兼容的模板
2. 当用户周频>模板周频时，系统应依据模板定义的补充策略（循环/补充/随机）安排训练
3. 当用户选择三分化推拉腿循环时，系统应安排推力日、拉力日、腿部日的动作模式
4. 当用户选择五分化单部位循环时，系统应分别安排胸部、背部、臀腿、肩部、手臂专项训练
5. 当模板休息日策略为主动恢复时，系统应在休息日安排恢复类课程

### 4. 课程生成层 (Course Engine)

#### 需求10：个性化课程生成

**用户故事：** 作为健身用户，我希望系统能够根据我的目标部位、时长偏好和当前状态生成个性化的训练课程。

#### 验收标准

1. 当用户选择目标部位时，系统应筛选主要部位匹配的力量动作
2. 当用户选择运动时长时，系统应按公式计算热身、主训、放松的动作数量
3. 当用户运动等级为初级时，系统应按60%初级、30%中级、10%高级分配动作难度
4. 当用户BMI≥28且非高级用户时，系统应剔除高冲击等级的动作
5. 当生成课程时，系统应根据策略矩阵配置训练参数（组数、休息、强度、RPE）
6. 当课程类型确定时，系统应适配相应的训练范式（抗阻/间歇/流式）并加载默认参数
7. 当课程时长≤30分钟时，系统应触发时间自适应策略（压缩组间休息或减少组数）

#### 需求11：训练参数智能配置

**用户故事：** 作为健身用户，我希望系统能够根据我的目标和等级智能配置训练参数，确保训练的科学性和有效性。

#### 验收标准

1. 当用户目标为增肌且等级为初级时，系统应配置3组、60s休息、65%强度、RPE7的参数
2. 当用户目标为力量且等级为中级时，系统应配置5组、120s休息、85%强度、RPE9的参数
3. 当主训时长<20分钟时，系统应强制使用循环组模式并将组间休息减半
4. 当上一课实际RPE>目标RPE+1时，系统应在下次训练中降低5%强度或减少1组
5. 当选择递增负荷策略时，系统应在每组间增加5%负荷（下限0.5kg/5s/1rep）
6. 当动作无历史记录时，系统应基于部位测评数据或默认值推算初始重量
7. 当处于组间休息时，系统应基于上一组的速度(VBT)或RPE动态调整下一组重量
8. 当进行计时模式的力量训练（如电机划船）时，系统应基于目标时长反推适配重量（时长越长重量越轻）

### 5. 交互与体验层 (Interaction)

#### 需求12：方案微调与自定义

**用户故事：** 作为健身用户，我希望能够对系统生成的计划或课程进行微调，以完全符合我的临时需求。

#### 验收标准

1. 当用户对推荐动作不满意时，系统应提供"同部位/同功能"的替换动作列表
2. 当用户修改计划日程时，系统应保持原定槽位逻辑，重新映射训练日期
3. 当用户手动调整单课时长后，系统应重新计算环节时长分配和动作数量
4. 当用户在生成结果页修改难度时，系统应实时重算所有动作的负荷参数

#### 需求13：可解释性推荐

**用户故事：** 作为健身用户，我希望了解推荐背后的逻辑，以增加我对AI教练的信任感。

#### 验收标准

1. 当生成课程时，系统应展示核心推荐理由（如"根据您的疲劳状态安排恢复训练"）
2. 当展示推荐结果时，系统应可视化呈现匹配度标签（如"新鲜动作"、"收藏奖励"）

### 6. 闭环与进化层 (Feedback Loop)

#### 需求14：反馈闭环与进化

**用户故事：** 作为健身用户，我希望系统能够根据我的实际训练表现和反馈，不断优化后续的推荐准确度。

#### 验收标准

1. 当用户完成训练后，系统应根据最大负荷反推并更新用户的1RM数据
2. 当用户主动替换或移除动作时，系统应降低该动作在后续推荐中的权重（冷宫惩罚）
3. 当用户连续缺勤超过7天回归时，系统应给予完赛信心奖励并适当降低首课难度
4. 当用户连续3次负荷未提升时，系统应识别为平台期并建议切换负荷策略（如波浪周期）
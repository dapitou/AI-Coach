# AI运动推荐系统 - 详细工作任务清单
> **原则**：P1 优先保数据基建与核心链路畅通；P2/P3 逐步叠加算法复杂度。
> **优先级**：P0 (阻断性) > P1 (核心) > P2 (重要) > P3 (优化)

## 第一期：MVP (数字化教练)
> **目标**：跑通“测评-计划-排课-训练-记录”全链路，确保数据结构稳固，推荐逻辑可用（不犯错）。

### 1. 产品经理 (Product)
- **[P0] 数据重构定义**：
  - 输出《数据定义》最终版，确立动作、课程、计划、档案的全量字段（含伤病、器械、疲劳系数等P2/P3预留字段）。
  - 输出《动作库清洗SOP》，定义动作的“疼痛部位”、“器械”、“冲击等级”打标标准。
- **[P0] 核心逻辑细化**：
  - 细化《计划生成逻辑》v1.0：仅线性周期 + 静态模板匹配。
  - 细化《课程生成逻辑》v1.0：模板实例化 + 硬规则剔除（伤病/器械）。
  - 细化《疲劳管理逻辑》v1.0：基于容量的简单状态值计算。
- **[P1] 初始内容规划**：
  - 设计首批“动态循环模板”（推拉腿、全身循环等）。
  - 规划首批“官方预设课程”骨架。

### 2. 后端开发 (Backend)
- **[P0] 数据库建设**：
  - 建表：Plan, Stage, Template, Course, Section, Action, UserProfile, UserTrainingLog。
  - 数据迁移/初始化：配合运营导入清洗后的动作库数据。
- **[P0] 核心API开发**：
  - **档案服务**：用户基础信息、伤病、器械的增删改查。
  - **计划引擎**：实现“线性周期”计算，根据周频匹配“动态循环模板”。
  - **排课引擎**：实现基于模板的课程生成，执行“硬规则剔除”（过滤伤病/无器械动作）。
  - **训练结算**：接收终端训练数据，计算单次容量，更新“部位状态值”（疲劳v1.0）。
- **[P1] 运营后台API**：
  - 提供动作、模板、计划的配置接口。

### 3. 前端 - 运营后台 (Admin Web)
- **[P0] 动作管理重构**：
  - 新增/编辑动作页面：支持录入“疼痛部位”、“器械”、“冲击等级”、“解剖部位”等新字段。
  - 动作列表：增加按部位、器械筛选功能。
- **[P1] 模板与计划配置**：
  - 实现“动态循环模板”配置页（定义槽位、填充策略）。
  - 实现“计划”配置页（定义周期、阶段、关联模板）。

### 4. 前端 - 移动端 (APP)
- **[P0] 档案流程升级**：
  - 新增“疼痛部位”选择页（人体图交互）。
  - 新增“器械库”选择页。
- **[P0] 计划生成与展示**：
  - 计划生成引导页（确认目标、频率）。
  - 计划详情页（展示阶段、周课表）。
  - 课程详情页（展示动作列表、替换动作入口-仅UI）。

### 5. 前端 - 设备端 (Device)
- **[P0] 训练执行**：
  - 解析新版课程数据结构（支持热身/主训/放松分段）。
  - 视频播放器适配（支持循环播放、倒计时）。
  - 训练数据上报（上报实际完成的重量/次数/时长）。

### 6. 测试 (QA)
- **[P0] 数据完整性测试**：验证所有动作的标签是否录入正确，无空指针风险。
- **[P0] 规则阻断测试**：
  - **伤病测试**：模拟膝盖痛用户，确保生成的计划中无深蹲/跳跃类动作。
  - **器械测试**：模拟无哑铃用户，确保无哑铃动作。
- **[P1] 流程测试**：从档案创建到计划生成，再到训练结算的闭环测试。

---

## 第二期：进阶版 (智能助理)
> **目标**：引入动态筛选与反馈闭环，实现“千人千面”的初步体验。

### 1. 产品经理
- **[P1] 算法策略定义**：
  - 定义《AI推荐配置》中的“筛选打分规则”（新鲜度、核心匹配度权重）。
  - 定义“波浪周期”的负荷波动逻辑。
- **[P1] 反馈闭环设计**：
  - 设计课后RPE交互流程。
  - 定义RPE与下一次负荷调整的映射关系。

### 2. 后端开发
- **[P1] 排课引擎升级 (v2.0)**：
  - 实现“七层模型”中的第6层（容量与筛选）。
  - 开发“动作打分器”：基于新鲜度、匹配度对动作池排序。
  - 实现“热身/放松”环节的动态填充（基于部位贪心算法）。
- **[P1] 反馈闭环系统**：
  - 记录用户RPE反馈。
  - 实现“1RM动态估算”逻辑（基于RPE调整）。
  - 计划引擎支持“波浪周期”生成。

### 3. 前端 - 移动端 (APP)
- **[P1] 交互升级**：
  - 课后反馈页：新增RPE打分滑块。
  - 档案页：新增“每日时长微调”、“生理周期”入口。
  - 动作替换功能：对接后端筛选接口，展示推荐替换动作。

### 4. 前端 - 运营后台
- **[P2] 策略配置中心**：
  - 实现《AI推荐配置》的可视化配置（调整打分权重、疲劳阈值）。

### 5. 测试 (QA)
- **[P1] 算法逻辑测试**：
  - 验证“新鲜度”逻辑（昨天练过的动作今天是否降权）。
  - 验证“RPE闭环”（反馈累了，下次课是否真的降重了）。
- **[P2] 性能测试**：
  - 动态筛选接口的响应时间（目标 < 200ms）。

---

## 第三期：完整版 (专家系统)
> **目标**：攻克生理学深水区，处理复杂边缘场景，达到顶级智能。

### 1. 产品经理
- **[P2] 高级生理模型**：
  - 定义CNS（中枢神经）疲劳计算公式。
  - 梳理“动作模式-功能热身”映射表。
- **[P2] 智能干预策略**：
  - 定义“平台期”识别阈值及干预方案。
  - 定义“缺勤回归”策略（顺延 vs 跳过）。

### 2. 后端开发
- **[P2] 疲劳管理升级 (v2.0)**：
  - 实现CNS疲劳计算与恢复逻辑。
  - 引入“强度疲劳系数”修正。
- **[P2] 排课引擎升级 (v3.0)**：
  - 实现“生物力学热身”推荐逻辑。
  - 实现“超级组”自动配对逻辑（主动肌-拮抗肌）。
- **[P2] 智能闭环 (v2.0)**：
  - 开发“平台期检测”定时任务。
  - 开发“日程自适应”引擎（处理缺勤顺延）。

### 3. 前端 - 移动端 (APP)
- **[P2] 高级体验**：
  - 风格偏好设置（沉浸型/教学型）。
  - 日程管理：手动调整/顺延计划入口。
  - 平台期提示与干预弹窗。

### 4. 前端 - 设备端
- **[P2] 体验优化**：
  - 支持“超级组”UI展示（两个动作交替显示）。
  - 适配“沉浸型”播放模式（减少语音干扰）。

### 5. 测试 (QA)
- **[P2] 复杂场景测试**：
  - 模拟长期缺勤后的回归逻辑。
  - 验证平台期干预是否生效。
  - 验证超级组排课的解剖学正确性。
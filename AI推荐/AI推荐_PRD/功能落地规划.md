# AI运动推荐系统 - 功能落地规划 (Phasing Plan)
> **核心策略**：小步快跑，先僵化（跑通流程），后优化（引入算法），再固化（智能闭环）。
> **资源导向**：P1 聚焦核心链路闭环；P2 聚焦个性化与动态计算；P3 聚焦生理学深度与人性化。

## 第一期：MVP (最小可行性产品) - "数字化教练"
> **目标**：跑通“测评-计划-排课-训练-记录”的核心链路，确保用户有课练，且逻辑自洽。
> **关键词**：数据基建、规则驱动、硬性约束、线性周期

### 1. 核心模块
- **数据重构 (最高优先级)**：
  - **全量定义**：完成计划、阶段、模板、课程、环节、动作、档案的所有属性字段重构与数据库落地。
  - **数据清洗**：确保现有动作库打标（部位、器械、疼痛关联）满足P1筛选需求。
- **用户档案 (Lite)**：
  - 仅采集核心字段：性别、BMI、主要目标、运动等级、每周运动频率。
  - **关键约束**：**疼痛部位**、**没有的器械** (P1即上线，确保可用性)。
  - *暂不做：生理周期、睡眠、详细偏好。*
- **疲劳管理系统 (v1.0)**：
  - **上线**：`疲劳管理逻辑.md` 中的“肌肉/部位状态值”计算。
  - **应用**：基于训练容量计算疲劳度。若部位处于“力竭”状态，排课时强制规避该部位或降低强度。
- **计划引擎 (v1.0)**：
  - **周期模型**：仅支持“线性周期”（最稳健，适合冷启动）。
  - **阶段划分**：固定为标准4阶段（适应-进阶-突破-减载）。
  - **排课逻辑**：基于“动态循环模板”的**硬匹配**。若用户周频=3，直接调取3频模板，不处理溢出/缺勤。
- **课程生成 (v1.0)**：
  - **生成方式**：**模板实例化**。基于预设的“课程模式”（如推力日），直接填充预设的高权重动作。
  - **动作筛选**：执行**硬规则剔除**（部位匹配、等级匹配、**伤病规避**、**器械过滤**）。
  - *暂不做：复杂的加权打分（新鲜度/高效等）、风格偏好。*
- **训练执行**：
  - **负荷计算**：基于 %1RM 的静态计算。若无1RM，使用默认值。
  - **组间策略**：仅支持“恒定”和“推荐”策略。

### 2. 技术架构
- **数据层**：完成所有基础表结构设计（动作、课程、计划、档案）。
- **算法层**：无实时计算压力，主要依靠数据库查询和简单的逻辑判断。

---

## 第二期：进阶版 - "智能助理"
> **目标**：引入“动态计算”和“反馈闭环”，让计划具备初步的个性化和适应性。
> **关键词**：动态筛选、波浪周期、反馈闭环

### 1. 核心模块
- **用户档案 (Pro)**：
  - 新增：每日运动时长微调、生理周期（女性）。
  - **能力**：支持基于动作库的“黑白名单”过滤（用户主动屏蔽动作）。
- **课程生成 (v2.0)**：
  - **生成方式**：**动态筛选**。启用“七层模型”中的第6层（容量与筛选）。
  - **算法**：引入“加权打分”机制（核心匹配、新鲜度加分）。
  - **结构**：支持“热身/放松”环节的按时长自动填充（基于部位贪心算法）。
- **反馈闭环 (v1.0)**：
  - **RPE调整**：基于用户反馈的RPE，动态调整下一次训练的1RM估算值。
  - **周期模型**：新增“波浪周期”，针对中高阶用户引入强度波动。

### 2. 技术架构
- **算法层**：引入动作筛选引擎，需处理实时打分逻辑。
- **数据层**：建立用户训练历史库，用于计算疲劳和新鲜度。

---

## 第三期：完整版 - "专家系统"
> **目标**：实现“顶级专家”的生理学深度和人性化体验，处理复杂场景。
> **关键词**：神经疲劳、生物力学、平台期干预、生活适应

### 1. 核心模块
- **疲劳管理系统 (v2.0)**：
  - **新增**：**CNS（中枢神经）疲劳**计算。
  - **修正**：引入强度疲劳系数（区分大重量与小重量的代价）。
  - **恢复**：引入睡眠时长、年龄对恢复速度的修正。
- **课程生成 (v3.0)**：
  - **生物力学热身**：上线“动作模式-功能热身映射”，基于主训动作模式精准推荐热身（如推类动作激活肩袖）。
  - **智能编排**：支持“超级组”自动配对（主动肌-拮抗肌）。
  - **风格化**：支持“沉浸型”vs“教学型”偏好，调整动作难度和引导方式。
- **智能闭环 (v2.0)**：
  - **平台期识别**：自动检测训练停滞，触发“平台期干预策略”（如强制减载、更换负荷策略）。
  - **日程适应**：上线“缺勤策略”（顺延/跳过），处理用户长期缺勤后的回归逻辑。
  - **偏好学习**：基于用户的“替换/收藏”行为，自动调整动作推荐权重。

### 2. 技术架构
- **性能优化**：针对复杂的筛选规则引入预计算或缓存机制。
- **配置中心**：全面启用 `AI推荐配置.md`，支持运营动态调整算法策略矩阵。

---

## 功能特性对比表

| 模块 | 功能点 | P1 (MVP) | P2 (进阶) | P3 (完整) |
| :--- | :--- | :--- | :--- | :--- |
| **用户** | 基础档案 | ✅ | ✅ | ✅ |
| | 伤病/器械过滤 | ✅ | ✅ | ✅ |
| | 生理/睡眠修正 | ❌ | ❌ | ✅ |
| **计划** | 线性周期 | ✅ | ✅ | ✅ |
| | 波浪/区块周期 | ❌ | ✅ | ✅ |
| | 日程顺延/跳过 | ❌ | ❌ | ✅ |
| **排课** | 静态模板匹配 | ✅ | ✅ | ✅ |
| | 动态溢出处理 | ❌ | ✅ | ✅ |
| **课程** | 模板动作填充 | ✅ | ❌ | ❌ |
| | 动态筛选算法 | ❌ | ✅ | ✅ |
| | 生物力学热身 | ❌ | ❌ | ✅ |
| | 超级组/巨型组 | ❌ | ❌ | ✅ |
| **疲劳** | 肌肉疲劳计算 | ✅ | ✅ | ✅ |
| | CNS神经疲劳 | ❌ | ❌ | ✅ |
| | 强度系数修正 | ❌ | ❌ | ✅ |
| **闭环** | RPE负荷调整 | ❌ | ✅ | ✅ |
| | 平台期干预 | ❌ | ❌ | ✅ |
| | 偏好自学习 | ❌ | ❌ | ✅ |

---

## 开发资源建议

### P1 阶段 (生存)
- **重点**：数据录入（动作库、模板库）、流程跑通。
- **风险**：动作库数据质量差会导致体验崩塌，需运营强介入。

### P2 阶段 (发展)
- **重点**：算法逻辑实现、数据库性能（历史数据查询）。
- **风险**：疲劳参数（敏感度/恢复率）需要小范围灰度测试校准，否则容易出现“练死人”或“练不到位”的情况。

### P3 阶段 (卓越)
- **重点**：复杂规则的解耦、边缘情况处理（如生病回归）。
- **风险**：逻辑过于复杂导致系统黑盒化，需完善“推荐理由”透传机制，让用户知道为什么推这个课。
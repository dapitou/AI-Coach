# AI推荐配置
> > *业务导读：算法的“控制台”，运营人员可以在这里调整推荐策略和参数。*
> 定义：AI推荐引擎的参数化配置中心，采用分层架构设计，支持运营动态下发。
> 架构：全局基准 -> 策略定义 -> 推荐筛选 -> 状态适配

## 目录索引
> > *业务导读：快速查找各类配置项的入口。*
*   **一、 全局基准配置**
    *   [1.1 策略矩阵配置](#11-策略矩阵配置)
    *   [1.2 课程环节模板配置](#12-课程环节模板配置)
    *   [1.3 结构与组装配置](#13-结构与组装配置)
    *   [1.4 等级强度系数配置](#14-等级强度系数配置)
    *   [1.5 计划阶段模板配置](#15-计划阶段模板配置)
    *   [1.6 训练范式配置](#16-训练范式配置)
*   **二、 策略定义配置**
    *   [2.1 负荷与组间策略配置](#21-负荷与组间策略配置)
    *   [2.2 难度兼容策略配置](#22-难度兼容策略配置)
    *   [2.3 阶段周期分配配置](#23-阶段周期分配配置)
*   **三、 推荐与筛选配置**
    *   [3.1 推荐影响因子配置](#31-推荐影响因子配置)
*   **四、 状态适配与反馈**
    *   [4.1 状态适配配置](#41-状态适配配置)
    *   [4.2 反馈与自适应配置](#42-反馈与自适应配置)

## 一、 全局基准配置
> 作用：定义核心训练参数的基准值与基础结构。
> > *业务导读：系统的“出厂设置”。定义了不同目标（增肌/减脂）和等级（新手/大神）的标准训练参数。*

### 1.1 策略矩阵配置
> > *业务导读：定义不同目标和等级下的基准参数，比如增肌做几组，减脂休息多久。*
> **[开发映射]**：
> - 键1：`计划功能目标` -> 对应 `[计划属性].计划功能目标` / `[运动档案].功能目标`
> - 键2：`运动等级` -> 对应 `[运动档案].运动等级`
> 数据结构：`Map<功能目标, Map<运动等级, 环节参数配置>>`
> 用途：定义核心训练参数的基准值。

### 配置模型
```json
{
  "计划功能目标": "增肌 | 力量 | 减脂 | ...", // 来源：[计划属性].计划功能目标
  "运动等级": ["L1", "L2"] | "All",     // 来源：[运动档案].运动等级
  "环节参数": {
    "动作组数": 3,           // 来源：[环节属性].动作组数
    "休息配置": true,        // 来源：[环节属性].休息配置 (true=休息, false=不休息)
    "组间休息": 60,          // 来源：[环节属性].组间休息 (仅当休息配置=true时有效)
    "轮间休息": 90,          // 来源：[环节属性].轮间休息 (仅当休息配置=true时有效) [新增]
    "动作节奏": "2-0-2-0",   // 来源：[环节属性].动作节奏 [新增]
    "训练强度": 0.65,        // 来源：[环节属性].训练强度
    "循环模式": "常规组",     // 来源：[环节属性].循环模式
    "发力模式": "恒力",       // 来源：[环节属性].发力模式 [新增]
    "负荷策略": "推荐",       // 来源：[环节属性].负荷策略
    "难度策略": "标准",       // 来源：[环节属性].难度策略
    "目标RPE": 8             // 来源：[环节属性].目标RPE [新增]
  }
}
```

### 默认配置表
| 计划功能目标 | 运动等级分组| 动作组数 | 动作间歇(s) | 训练强度 | 循环模式 | 发力模式 | 负荷策略 | 难度策略 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **增肌** | [L1, L2] | 3 | 60 | 0.65 | 常规组 | 恒力 | 推荐 | 标准 |
| **增肌** | [L3, L4] | 4 | 90 | 0.75 | 常规组 | 恒力 | 递增 | 进阶 |
| **增肌** | [L5] | 5 | 90 | 0.80 | 常规组 | 离心 | 递增 | 挑战 |
| **力量** | [L1, L2] | 3 | 90 | 0.75 | 常规组 | 恒力 | 恒定 | 标准 |
| **力量** | [L3, L4] | 5 | 120 | 0.85 | 常规组 | 恒力 | 恒定 | 进阶 |
| **力量** | [L5] | 5 | 180 | 0.90 | 常规组 | 恒力 | 递增 | 挑战 |
| **减脂** | [L1, L2] | 3 | 30 | 0.55 | 循环组 | 恒力 | 计时 | 保守 |
| **减脂** | [L3, L4] | 4 | 30 | 0.65 | 循环组 | 恒力 | 计时 | 标准 |
| **减脂** | [L5] | 5 | 20 | 0.75 | 循环组 | 恒力 | 计时 | 挑战 |
| **耐力** | [L1, L2] | 3 | 45 | 0.40 | 超级组 | 恒力 | 计时 | 保守 |
| **耐力** | [L3, L4, L5]| 4 | 30 | 0.50 | 超级组 | 恒力 | 计时 | 标准 |
| **爆发** | [L1, L2] | 3 | 120 | 0.50 | 常规组 | 恒力 | 恒定 | 保守 |
| **爆发** | [L3, L4] | 4 | 150 | 0.70 | 常规组 | 弹力 | 递增 | 进阶 |
| **爆发** | [L5] | 5 | 180 | 0.85 | 常规组 | 弹力 | 递增 | 挑战 |
| **心肺** | [L1, L2] | 3 | 30 | 0.50 | 循环组 | 划船 | 计时 | 保守 |
| **心肺** | [L3, L4] | 4 | 20 | 0.65 | 循环组 | 划船 | 计时 | 标准 |
| **心肺** | [L5] | 5 | 15 | 0.80 | 循环组 | 划船 | 计时 | 挑战 |
| **HIIT** | All | 6 | 30 | 0.75 | 循环组 | 恒力 | 计时 | 标准 |
| **有氧** | All | 4 | 15 | 0.60 | 循环组 | 划船 | 计时 | 标准 |
| **瑜伽** | All | 1 | 0 | 0.40 | 常规组 | 恒力 | 计时 | 标准 |
| **普拉提**| All | 3 | 30 | 0.50 | 常规组 | 恒力 | 恒定 | 标准 |
| **拉伸** | All | 1 | 0 | 0.20 | 常规组 | 恒力 | 计时 | 保守 |
| **恢复** | All | 2 | 0 | 0.30 | 常规组 | 恒力 | 恒定 | 保守 |
| **柔韧** | All | 2 | 0 | 0.30 | 常规组 | 恒力 | 计时 | 标准 |
| **协调** | All | 3 | 60 | 0.50 | 常规组 | 恒力 | 恒定 | 标准 |
| **体态** | All | 3 | 45 | 0.50 | 常规组 | 恒力 | 计时 | 标准 |
| **激活** | All | 2 | 0 | 0.40 | 常规组 | 恒力 | 恒定 | 标准 |
| **平衡** | All | 3 | 60 | 0.50 | 常规组 | 恒力 | 恒定 | 标准 |
| **专项** | All | 3 | 90 | 0.70 | 常规组 | 恒力 | 推荐 | 标准 |

### 1.2 课程环节模板配置
> > *业务导读：定义单节课的“配方”，比如练胸日核心动作占多少，辅助动作占多少。*
> **[开发映射]**：
> - 匹配键：`策略维度` -> `[单周循环模板].基础槽位.槽位名称`
> - 筛选条件：`动作构造` -> `[动作属性].动作构造`；`动作模式` -> `[动作属性].动作模式`
> - 排序策略：`能量管理` -> 对应算法排序函数 `SortByEnergy()`
> 数据结构：`List<模板配置项>`
> 用途：定义单节课（或单环节）的“运动处方配方”。兼容所有功能目标。
> **简化原则**：通过扁平化的配置表，直接定义动作成分与比例。
> **输入维度**：
> 1. **策略维度** (最高优)：来自计划模板的特定指定 (如 "推力日")。
> 2. **解剖维度** (次优)：用户指定的训练部位 (如 "胸部")。
> 3. **生理维度** (基础)：课程的生理训练目标 (如 "减脂")。
> 4. **用户维度** (修正)：用户的运动等级 (L1-L5)、性别、年龄段。
> **匹配逻辑**：采用**最佳匹配原则**。系统根据输入维度构建特征向量，在配置池中寻找匹配度最高的骨架。
> *   优先级示例：`[策略名]` > `[部位]_[等级]` > `[部位]` > `[目标]_[等级]` > `[目标]` > `通用`。
> **排序策略**：定义动作在环节内的执行顺序。可选值：`体能分配` (默认)、`顺序执行`、`交替执行`、`流式优化`。详见 1.3.D 排序策略定义。

### 默认配置表
| 模板键 (Key) | 适用等级 | 适用性别 | 动作槽位配置 (按顺序填充) | 排序策略 |
| :--- | :--- | :--- | :--- | :--- |
| **通用** | All | All | 动作构造:复合(0.6), 动作构造:孤立(0.4) | 体能分配 |

| **[策略维度 - 推拉腿分化]** |  |  |  |  |  |  |
| **推力日** | All | All | 动作模式:水平推(0.4), 动作模式:垂直推(0.4), 主动肌:肱三头肌(0.2) | 体能分配 |
| **拉力日** | All | All | 动作模式:垂直拉(0.4), 动作模式:水平拉(0.4), 主动肌:肱二头肌(0.2) | 体能分配 |
| **腿部日** | All | All | 动作模式:膝主导(0.4), 动作模式:髋主导(0.4), 主动肌:小腿(0.1), 主动肌:核心(0.1) | 体能分配 |

| **[策略维度 - 上下肢分化]** |  |  |  |  |  |  |
| **上肢日** | All | All | 动作模式:水平推(0.2), 动作模式:垂直推(0.2), 动作模式:水平拉(0.2), 动作模式:垂直拉(0.2), 部位:手臂(0.2) | 体能分配 |
| **下肢日** | All | All | 动作模式:膝主导(0.4), 动作模式:髋主导(0.4), 动作模式:弓步(0.1), 部位:核心(0.1) | 体能分配 |

| **[解剖维度 - 部位训练]** |  |  |  |  |  |  |
| **胸部_L1** | L1,L2 | All | 主动肌:胸大肌中束(0.4), 主动肌:胸大肌上束(0.4), 主动肌:胸大肌下束(0.1), 主动肌:胸大肌内侧(0.1) | 体能分配 |
| **胸部_L5** | L3-L5 | All | 动作模式:水平推(0.6), 动作模式:夹胸(0.2), 主动肌:肱三头肌(0.2) | 体能分配 |
| **臀部_女** | All | 女 | 动作模式:髋主导(0.5), 动作模式:弓步(0.3), 主动肌:臀中肌(0.2) | 体能分配 |
| **臀部_男** | All | 男 | 主动肌:臀大肌(0.65), 主动肌:臀中肌(0.35) | 体能分配 |
| **背部_L1** | L1,L2 | All | 主动肌:背阔肌(0.4), 主动肌:斜方肌(0.4), 主动肌:竖脊肌(0.2) | 体能分配 |
| **背部_L5** | L3-L5 | All | 动作模式:垂直拉(0.5), 动作模式:水平拉(0.3), 主动肌:肱二头肌(0.2) | 体能分配 |
| **肩部_L1** | L1,L2 | All | 主动肌:三角肌中束(0.5), 主动肌:三角肌前束(0.3), 主动肌:三角肌后束(0.2) | 体能分配 |
| **肩部_L5** | L3-L5 | All | 动作模式:垂直推(0.4), 主动肌:三角肌中束(0.4), 主动肌:三角肌后束(0.2) | 体能分配 |
| **手臂_L1** | L1,L2 | All | 动作构造:孤立(0.8), 动作构造:复合(0.2) | 交替执行 |
| **手臂_L5** | L3-L5 | All | 主动肌:肱三头肌(0.6), 主动肌:肱二头肌(0.4) | 超级组 |
| **腿部_L1** | L1,L2 | All | 动作构造:固定器械(0.5), 动作模式:膝主导(0.3), 动作模式:髋主导(0.2) | 体能分配 |
| **腿部_L5** | L3-L5 | All | 主动肌:股四头肌(0.4), 主动肌:腘绳肌(0.4), 主动肌:内收肌(0.1), 主动肌:腓肠肌(0.1) | 体能分配 |
| **核心_L1** | L1,L2 | All | 动作模式:核心稳定(0.6), 动作模式:旋转(0.4) | 顺序执行 |
| **核心_L5** | L3-L5 | All | 主动肌:腹直肌(0.7), 主动肌:腹外斜肌(0.3) | 顺序执行 |
| **腹部** | All | All | 主动肌:腹直肌(0.5), 主动肌:腹外斜肌(0.3) | 顺序执行 |
| **小腿** | All | All | 主动肌:腓肠肌(0.6), 主动肌:比目鱼肌(0.4) | 顺序执行 |
| **颈部** | All | All | 主动肌:胸锁乳突肌(0.5), 主动肌:斜方肌上束(0.5) | 顺序执行 |
| **前臂** | All | All | 主动肌:前臂肌群(1.0) | 顺序执行 |

| **[目标维度 - 功能训练]** |  |  |  |  |  |  |
| **减脂** | All | All | 动作功能:心肺(0.6), 动作构造:复合(0.2), 动作模式:核心稳定(0.2) | 交替执行 |
| **HIIT燃脂** | All | All | 动作功能:爆发(0.4), 动作功能:心肺(0.4), 动作模式:核心稳定(0.2) | 顺序执行 |
| **柔韧** | All | All | 动作功能:柔韧(0.8), 动作功能:体态(0.2) | 顺序执行 |
| **平衡** | All | All | 动作功能:平衡(0.5), 动作模式:核心稳定(0.3), 动作功能:协调(0.2) | 顺序执行 |
| **核心激活** | All | All | 动作功能:激活(0.6), 动作模式:核心稳定(0.4) | 顺序执行 |
| **激活** | All | All | 动作功能:激活(0.6), 动作功能:平衡(0.2), 动作功能:协调(0.2) | 顺序执行 |
| **恢复** | All | All | 动作功能:恢复(0.5), 动作功能:柔韧(0.3), 动作功能:激活(0.2) | 顺序执行 |
| **体态** | All | All | 动作功能:体态(0.6), 动作功能:柔韧(0.2), 动作模式:核心稳定(0.2) | 顺序执行 |

| **[混合维度 - 目标 + 部位]** |  |  |  |  |  |  |
| **肩部_L3_力量** | L3,L4 | All | 动作模式:垂直推(0.6), 动作模式:水平推(0.2), 主动肌:三角肌后束(0.2) | 体能分配 |
| **腿部_L5_爆发** | L3-L5 | All | 动作模式:膝主导(0.5), 动作功能:爆发(0.3), 主动肌:臀大肌(0.2) | 体能分配 |

| **[通用]** |  |  |  |  |  |  |
| **全身** | All | All | 动作构造:复合(0.6), 动作构造:孤立(0.4) | 体能分配 | 默认全身训练 |

### 1.3 结构与组装配置
> > *业务导读：定义课程的时间结构，热身、主训、放松各占多少比例。*
> **[开发映射]**：
> - 输入：`课程时长` -> `[课程属性].课程时长`
> 用途：定义课程的宏观时间结构（环节）与微观内容填充（槽位）规则。

#### A. 环节时长分配
> 逻辑：基于课程总时长，按比例切分，但受限于最大时长（Cap），避免长课程热身过久。

| 环节类型 | 推荐占比 | 最大时长 | 动作数量限制 (个) | 说明 |
| :--- | :--- | :--- | :--- | :--- |
| **热身** | 15% | 5 min | 4 - 6 | 无论主训多久，热身不超过5分钟，动作不超过6个 |
| **主训** | 70% - 80% | - | - | 剩余时间全部分配给主训 |
| **放松** | 15% | 5 min | 3 - 5 | 无论主训多久，放松不超过5分钟 |

#### B. 槽位填充策略
> 逻辑：定义主训环节内部的动作抽取规则。

| 槽位类型 | 抽取范围 (Top N) | 抽取策略 | 说明 |
| :--- | :--- | :--- | :--- |
| **通用槽位** | 3 | Top-K 随机 | 从候选池前3名中随机抽取，避免局部最优 |

#### C. 动态适配策略 [新增]
> 逻辑：针对短时长课程的特殊处理规则。

| 条件 | 触发阈值 | 调整动作 | 说明 |
| :--- | :--- | :--- | :--- |
| **短时高休 (力量)** | 时长≤30min && 目标∈[力量,爆发] | `组间休息` = Min(原值, 120s) | 力量训练底线，不低于120s以保证ATP-CP恢复 |
| **短时高休 (增肌)** | 时长≤30min && 目标∈[增肌,塑形] | `组间休息` = Min(原值, 60s) | 增加代谢压力，刺激生长激素 |
| **短时高休 (耐力)** | 时长≤30min && 目标∈[减脂,心肺] | `组间休息` = Min(原值, 45s) | 维持高心率区间 |
| **动作过少** | 目标动作数 < 3个 | `动作组数` = Max(2, 适配值) | 牺牲单动作容量，换取动作多样性 |

#### D. 排序策略定义 [新增]
> 逻辑：定义动作在环节内的执行顺序。

| 策略名称 | 排序逻辑 | 适用场景 |
| :--- | :--- | :--- |
| **体能分配** | 复合动作 > 孤立动作；大肌群 > 小肌群 | 增肌、力量 (抗阻范式) |
| **顺序执行** | 严格按照模板槽位的定义顺序排列 | 核心、康复、特定编排 |
| **交替执行** | 槽位A -> 槽位B -> 槽位A... (如上肢/下肢) | 减脂、代谢训练 |
| **流式优化** | 最小化体位切换成本 (站姿->坐姿->卧姿) | 瑜伽、普拉提 (流式范式) |

### 1.4 等级强度系数配置
> > *业务导读：根据用户等级设定初始负荷，新手轻一点，老手重一点。*
> 用途：
> 1. **容量适配 (Volume)**：新手低容量防受伤，高手高容量促适应。
> 2. **强度适配 (Intensity)**：调整相对强度百分比（%1RM）。
> 3. **密度适配 (Density)**：调整组间休息时间，高手恢复快休息短。
> 公式：
> - 推荐组数 = 基准组数 * 容量系数
> - 推荐强度 = 基准强度 * 强度系数
> - 推荐休息 = 基准休息 * 间歇系数

| 运动等级 | 等级系数 | 说明 |
| :--- | :--- | :--- |
| **L1 (入门)** | 0.5 | 需降低门槛，建立信心 |
| **L2 (初级)** | 0.8 | 低于标准，关注动作质量 |
| **L3 (中级)** | 1.0 | 标准负荷 |
| **L4 (进阶)** | 1.2 | 增加负荷挑战 |
| **L5 (专业)** | 1.5 | 接近极限 |

### 1.5 单周循环模板配置 [新增]
> > *业务导读：定义各种周排课模式，比如“推拉腿”、“上下肢分化”等。*
> **[开发映射]**：
> - 匹配键1：`目标` -> `[阶段属性].阶段目标`
> - 匹配键2：`难度` -> `[计划属性].计划难度` (对应用户运动等级)
> - 匹配键3：`性别` -> `[运动档案].性别` (All/男/女)
> - 决策键：`周频` -> `[运动档案].每周运动频率`
> 用途：定义不同分化模式下的周排课骨架，供计划引擎匹配使用。
> 来源：[单周循环模板属性]

### 默认配置表
| ID | 名称 | 目标 | 难度 | 适用性别 | 周频 | 基础槽位 (摘要) | 补充策略 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **TPL_001** | 一分化 (全身) | 增肌 | All | All | 1 | [全身综合] | 循环 |
| **TPL_002** | 二分化 (上下肢) | 增肌 | All | All | 2 | [上肢日], [下肢日] | 循环 |
| **TPL_003** | 三分化 (推拉腿) | 增肌 | All | 男 | 3 | [推力日], [拉力日], [腿部日] | 循环 |
| **TPL_004** | 三分化 (臀腿侧重) | 增肌 | All | 女 | 3 | [臀腿日], [上肢日], [臀腿日] | 循环 |
| **TPL_005** | 四分化 (非线性) | 增肌 | All | All | 4 | [上肢力量], [下肢力量], [上肢肥大], [下肢肥大] | 循环 |
| **TPL_006** | 五分化 (单部位) | 增肌 | All | 男 | 5 | [胸], [背], [肩], [腿], [臂] | 循环 |
| **TPL_007** | 减脂循环 | 减脂 | L1 | All | 3 | [全身HIIT], [有氧耐力], [核心强化] | 循环 |

### 1.6 训练范式配置 [新增]
> > *业务导读：定义不同课程类型的底层逻辑范式，如力量课关注组数，瑜伽课关注流式体验。*
> **[开发映射]**：
> - 输入：`课程类型` -> `[课程属性].课程类型`
> - 输出：`训练范式` -> 决定后续环节生成的默认策略
> 用途：作为顶层分流逻辑，决定环节参数的默认值和动作排序逻辑。

#### A. 范式映射表
| 训练范式 | 包含课程类型 | 目标部位约束 | 核心特征 |
| :--- | :--- | :--- | :--- |
| **抗阻范式** | 力量, 康复, 高尔夫 | 可选任意部位 | 关注负荷，组间休息充分，强调动作质量 |
| **间歇范式** | HIIT, 有氧, 搏击 | 锁定 [全身] | 关注心率/工休比，高密度循环，强调代谢压力 |
| **流式范式** | 瑜伽, 普拉提, 拉伸, 冥想, 气功 | 可选任意部位 | 关注体位流动，无间歇/少间歇，强调呼吸与控制 |

#### B. 范式默认参数
| 训练范式 | 循环模式 | 负荷策略 | 休息配置 | 动作组数 | 排序策略 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **抗阻范式** | 常规组 | 推荐 | True | 3-5 | 体能分配 |
| **间歇范式** | 循环组 | 计时 | True | 3-5 | 强度波动 |
| **流式范式** | 常规组 | 计时 | False | 1 | 流式优化 |

## 二、 策略定义配置
> 作用：定义具体的执行策略逻辑（如负荷如何变化、阶段如何划分）。
> > *业务导读：系统的“战术手册”。定义了具体的执行逻辑，比如重量怎么加、阶段怎么分。*

### 2.1 负荷与组间策略配置
> > *业务导读：定义每组重量怎么变，是恒定不变还是像金字塔一样递增。*
> 数据结构：`Map<负荷策略, 组序列>`
> 用途：定义不同负荷策略下的每组参数变化。

### 配置模型
```json
{
  "负荷策略": "递增", // 来源：《环节属性》.负荷策略
  "组序列": [
   {"组序号": 1, "负荷系数": 0.85, "次数增量": 2}, // 定义：第几组，强度/重量系数，次数调整值
   {"组序号": 2, "负荷系数": 0.90, "次数增量": 1},
   {"组序号": 3, "负荷系数": 1.00, "次数增量": 0}]
}
```

### 默认配置表
| 策略名称 | 组序号 | 负荷系数 | 次数增量 | 说明 |
| :--- | :--- | :--- | :--- | :--- |
| **恒定** | All | 1.0 | 0 | 所有组保持基准负荷 |
| **递增** | 1 | 0.85 | +2 | 正金字塔，重量递增 |
| **递增** | 2 | 0.90 | +1 | - |
| **递增** | 3+ | 1.0 | 0 | - |
| **递减** | 1 | 1.0 | 0 | 倒金字塔，重量递减 |
| **递减** | 2 | 0.90 | +2 | - |
| **递减** | 3+ | 0.80 | +4 | - |
| **计时** | All | - | - | 固定时长(如30s/45s)，尽可能多做 (AMRAP) |

### 2.2 难度兼容策略配置 [原2.1]
> > *业务导读：定义动作筛选的难度范围，比如新手能不能做高难度动作。*
> **[开发映射]**：
> - 输入：`难度策略` -> `[环节属性].难度策略`
> - 应用：`动作难度` -> `[动作属性].动作难度`
> 数据结构：Map<难度策略, 概率分布>
> 用途：定义动作筛选时的难度概率分布（高斯分布逻辑）。

### 配置模型
```json
{
  "难度策略": "标准",
  "概率分布": {
    "-1": 0.20, // 降1级动作的概率 (如L3用户选L2动作)
    "0": 0.60,  // 同级动作的概率
    "1": 0.20   // 升1级动作的概率
  }
}
```

### 默认配置表
| 策略名称 [键] | 范围偏移 | 概率分布 [偏移: 权重] | 说明 |
| :--- | :--- | :--- | :--- |
| **保守** (L1) | [0, 2] | {0: 60, 1: 30, 2: 10} | 同级60%, 进阶30%, 挑战10% (L1无降级空间) |
| **标准** (L2/3) | [-1, 1] | {0: 60, -1: 20, 1: 20} | 同级60%, 降级20%, 升级20% |
| **进阶** (L4) | [-1, 1] | {0: 40, -1: 30, 1: 30} | 同级40%, 降级30%, 升级30% |
| **挑战** (L5) | [-2, 0] | {0: 30, -1: 40, -2: 30} | 同级30%, 降级40%, 基础30% (高阶用户回归基础) |

### 2.3 阶段周期分配配置 [原2.5]
> > *业务导读：定义计划各阶段的时长比例，确保训练有周期性变化。*
> **[开发映射]**：
> - 键1：`计划功能目标` -> `[计划属性].计划功能目标`
> - 键2：`计划周期` -> `[计划属性].计划周期`
> 用途：定义不同计划周期长度下的阶段划分逻辑、时长分配及各阶段的修正系数。

### 配置模型
```json
{
  "计划功能目标": "增肌 | 力量", // [新增] 区分不同目标的周期策略
  "短周期阈值": 4,          // 定义：小于此周数视为短周期
  "阶段最小周数": 1,        // 定义：每个阶段的最短持续时间
  "阶段属性": {             // [新增] 定义各阶段的修正系数
    "适应期": {"强度系数": 0.8, "容量系数": 0.8},
    "进阶期": {"强度系数": 1.0, "容量系数": 1.0},
    "突破期": {"强度系数": 1.1, "容量系数": 0.9},
    "减载期": {"强度系数": 0.6, "容量系数": 0.6}
  },
  "标准比例": {            // 定义：长周期下的阶段时长分配权重
    "适应期": 0.25,
    "进阶期": 0.40,
    "突破期": 0.25,
    "减载期": 0.10
  },
  "短周期策略": {           // 定义：短周期下的阶段裁剪逻辑
    "1": ["进阶期"],
    "2": ["适应期", "进阶期"],
    "3": ["适应期", "进阶期", "突破期"]
  }
}
```

### 默认配置表
| 计划周期 (周) | 阶段结构 (按顺序) | 时长分配逻辑 | 说明 |
| :--- | :--- | :--- | :--- |
| **1** | 进阶期 | 100% | 快速体验 |
| **2** | 适应期 -> 进阶期 | 1:1 | 简易周期 |
| **3** | 适应期 -> 进阶期 -> 突破期 | 1:1:1 | 完整进阶 |
| **4 (标准)** | 适应期 -> 进阶期 -> 突破期 -> 减载期 | 1:1:1:1 | 标准线性周期 |
| **> 4** | 适应期 -> 进阶期 -> 突破期 -> 减载期 | 按 25%:40%:25%:10% 分配 | 长周期规划 |

## 三、 推荐与筛选配置
> 作用：定义动作筛选、打分与组装的逻辑。
> > *业务导读：系统的“选品逻辑”。定义了怎么给动作打分，怎么根据用户喜好推荐动作。*

### 3.1 推荐影响因子配置
> > *业务导读：定义动作打分的规则，新鲜的加分，厌恶的扣分。*
> 数据结构：List<影响因子>
> 用途：统一管理所有涉及推荐打分、奖惩权重的配置项。

### 配置模型
```json
{
  "阈值参数": {
    "新鲜周期": 7,        // 单位：天。超过此天数未练视为新鲜
    "厌倦阈值": 3,        // 单位：次。连续出现次数
    "冷宫周期": 30,       // 单位：天。替换/移除动作的惩罚有效期
    "缺勤定义": 7,        // 单位：天。连续未训练天数
    "高完成度": 0.95      // 单位：比率。判定为擅长动作的标准
  }
}
```

### 默认配置表
| 分类 | 因子键 [键] | 权重/分值 | 触发规则逻辑 (引用阈值参数) |
| :--- | :--- | :--- | :--- |
| **用户偏好** | 收藏奖励 | +50 | `动作.是否收藏` == True |
| **行为反馈** | 新鲜奖励 | +60 | `当前日期` - `上次训练日期` > `新鲜周期` (7天) |
| **行为反馈** | 探索奖励 | +30 | `历史训练次数` == 0 |
| **行为反馈** | 厌倦惩罚 | -80 | `连续出现次数` ≥ `厌倦阈值` (3次) |
| **行为反馈** | 冷宫惩罚 | -50 | `当前日期` - `上次移除日期` ≤ `冷宫周期` (30天) |
| **心理激励** | 完赛信心奖励 | +20 | `连续缺勤天数` > `缺勤定义` (7天) && `历史平均完成度` > `高完成度` (0.95) |
| **用户状态** | 疲劳惩罚 | -50 | `辅助肌.状态值` < `疲劳阈值` (55) [引用4.1配置] |

## 四、 状态适配与反馈
> 作用：定义如何根据用户实时状态（疲劳、生理期、反馈）动态调整推荐。
> > *业务导读：系统的“应变能力”。定义了如何根据用户的疲劳、生理期和反馈来动态调整推荐。*

### 4.1 状态适配配置
> > *业务导读：根据疲劳度和生理期调整训练强度，人性化关怀。*
> 用途：统一管理基于用户实时状态（疲劳、生理期等）的参数修正与约束。

#### A. 疲劳干预
> 来源：《疲劳管理逻辑》.部位状态值

| 状态值区间 | 标签 | 强度系数 | 容量系数 | 强制约束 |
| :--- | :--- | :--- | :--- | :--- |
| **[85, 100]** | 已恢复 | 1.0 | 1.0 | - |
| **[55, 84]** | 恢复中 | 0.9 | 1.0 | - |
| **[30, 54]** | 疲劳中 | 0.8 | 0.8 | 剔除高冲击 |
| **[0, 29]** | 已力竭 | - | - | 推荐切换为“主动恢复”课程 |

### 4.2 反馈与自适应配置 [原4.3]
> > *业务导读：定义什么时候该调整强度，什么时候该判定为平台期。*
> 用途：定义反馈闭环中的判定阈值与触发策略。

| 参数/条件 | 阈值/动作 | 说明 |
| :--- | :--- | :--- |
| **平台期判定次数** | 3 | 连续 3 次负荷未提升 |
| **有效训练完成度** | 0.90 | 判定平台期时，要求课程完成度 > 90% |
| **厌恶判定次数** | 3 | 主动替换同一动作 > 3 次 |
| **平台期干预策略** | 连续3次未提升 -> `负荷策略`="波浪" | 通过波动强度打破适应 |
| **平台期干预策略** | 连续5次未提升 -> `动作组数`*1.2 | 增加容量积累代谢压力 |

## 需求池
> > *业务导读：未来版本规划的配置项。*
1. **波浪负荷策略**：支持波浪周期的负荷变化配置。
2. **生理周期适配**：
> 来源：《运动档案》.生理周期
| 生理阶段 | 强度系数 | 容量系数 | 禁忌/建议 |
| :--- | :--- | :--- | :--- |
| **月经期** | 0.60 | 0.50 | 推荐剔除[高冲击, 腹部挤压, 倒立]动作；推荐[瑜伽, 拉伸] |
| **卵泡期** | 1.05 | 1.10 | 雌激素上升，耐受度高，适合上强度 |
| **排卵期** | 1.10 | 0.90 | 力量峰值，但ACL损伤风险增加，需控制爆发性动作 |
| **黄体期** | 0.90 | 1.00 | 体温升高，心率漂移，适合稳态训练 |
3. **风格策略配置**：
> > *业务导读：根据用户喜欢的风格（如激进型）调整推荐策略。*
> 数据结构：Map<喜欢的训练风格, 风格修正配置>
> 用途：定义用户偏好对筛选逻辑的修正。
> ### 配置模型
> ```json
> {
>   "喜欢的训练风格": "激进型",
>   "策略覆盖": { "难度策略": "进阶" },
>   "筛选加分": { "目标属性": "动作功率", "目标值": "爆发", "分值": 20 }
> }
> ```
> ### 默认配置表
> | 风格名称 | 策略覆盖 | 筛选加分规则 |
> | :--- | :--- | :--- |
| **传统型** | - | 属性=`动作构造`, 值=`复合`, 分=+20 |
> | **多变型** | `循环模式`="超级组" | 属性=`新鲜奖励`, 值=`True`, 分=+20 |
| **激进型** | `难度策略`="进阶" | 属性=`动作功能`, 值=`爆发`, 分=+20 |
4. **RPE相关逻辑**：
> - **目标RPE**：定义环节预期的自觉费力程度。
> - **RPE偏差阈值**：|用户RPE - 目标RPE| > 2 时触发强度校准。
> - **过度训练干预**：连续2次RPE>9 -> `负荷策略`="减载"。
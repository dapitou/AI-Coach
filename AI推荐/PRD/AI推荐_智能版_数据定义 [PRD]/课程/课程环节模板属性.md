# 课程环节模板属性
> 定义：定义单节课程中某个环节（如热身、主训）的内部动作组合逻辑。它是课程生成的“微观配方”。
> > *业务导读：定义一个环节怎么组装动作，比如“胸部主训”环节，是“4个推胸+2个夹胸”，还是“3个复合+2个孤立”。*

## 基础信息
1. **环节模板ID**[新增]：数字 [必填，唯一校验]
> 定义：环节模板的技术主键
> 用途：系统内部流转，数据库主键
> 说明：纯数字自增ID，用于底层关联
> 规则：全局唯一
> 来源：创建时自动生成
2. **环节模板运营ID**[新增]：文本 [必填，唯一校验]
> 定义：业务侧使用的模板编号
> 用途：运营管理、日志排查、配置文件引用
> 说明：带字母的业务编码
> 规则：如 TPL_SEG_001
> 来源：运营后台配置
3. **环节模板名称**[新增]：文本 [必填，文本输入]
> 定义：模板的显示名称
> 用途：前端展示，运营管理检索
> 说明：运营后台配置的易读名称，需简洁明了
> 规则：文本输入
> 示例：胸部_L3
> 来源：运营后台配置
4. **动作配比**[新增]：字符串 [自动计算]
> 定义：环节内各动作槽位的权重比例概览
> 用途：列表页快速预览
> 说明：如 0.6:0.4。**展示字段**，由后端根据“动作槽位”配置自动计算。
> 规则：自动生成，强一致性
> 示例：0.6:0.4
> 来源：自动计算
5. **环节维度**[新增]：部位 | 动作模式 | 动作功能 [必填，单选]
> 定义：该模板适用的匹配维度
> 用途：决定该模板用于匹配哪种类型的训练需求
> 说明：如“部位”用于匹配“胸部”，“动作功能”用于匹配“减脂”
> 规则：单选
> 示例：部位
> 来源：运营后台配置
6. **环节目标**[新增]：[动态枚举] [必填，单选]
> 定义：该模板适用的具体匹配目标
> 用途：与环节维度组合，精确定位模板
> 说明：取值范围取决于环节维度
> 规则：单选
> 示例：胸部
> 来源：运营后台配置
7. **环节类型**[新增]：热身 | 主训 | 放松 [必填，单选]
> 定义：该模板所属的课程环节类型
> 用途：决定该模板用于生成哪个环节的动作序列
> 规则：单选
> 示例：主训
> 来源：运营后台配置
8. **适用等级**[新增]：L1 | L2 | L3 | L4 | L5 [必填，多选]
> 定义：该模板适用的用户运动等级
> 用途：匹配用户档案
> 规则：多选
> 示例：L3, L4
> 来源：运营后台配置
9. **适用性别**[新增]：All | 男 | 女 [必填，单选]
> 定义：该模板适用的用户性别
> 用途：匹配用户档案
> 规则：单选
> 示例：All
> 来源：运营后台配置

## 结构配置
10. **动作槽位**[原“动作槽位配置”]：列表 [必填，≥1项]
> 定义：定义环节内动作的筛选规则与权重
> 用途：AI引擎根据此配置筛选动作
> 说明：JSON数组结构，包含以下字段：
> - `侧重维度`：枚举 [动作构造 | 动作模式 | 动作功能 | 部位 | 主动肌]
> - `侧重目标`：具体的筛选值（如：复合动作、水平推、胸大肌中束）
> - `权重`：该槽位在环节中的占比权重（0-1）
> 规则：
> - **允许重复**：同一维度目标可配置多个槽位。
> - **权重归一化**：建议总和为1.0，若不为1则自动归一化。不允许权重为0。
> - **数量计算**：严格数量比例 (`Round(总数 * 权重)`)。
> - **保底规则**：每个槽位最少分配1个动作 (`Max(1, Count)`)。
> - **溢出处理**：若保底导致总数超标，优先从权重最大的槽位扣减。
> - **兜底机制**：若动作池不足，触发降级熔断（放宽筛选条件）。
> 示例：[{"侧重维度":"动作构造", "侧重目标":"复合动作", "权重":0.6}]
> 来源：运营后台配置
11. **排序策略**[升级]：列表 [必填，≥1项]
> 定义：环节内动作的多级排序规则，按优先级逐层执行
> 用途：决定生成课程时的动作顺序
> 说明：JSON数组结构，包含以下字段：
> - `排序维度`：枚举 [动作构造 | 动作模式 | 主动肌 | 主要配件 | 力臂挡位 | 动作体位 | 动作难度 | MET值 | 推荐权重 | 随机]
> - `排序方式`：枚举 [升序 | 降序 | 自定义 | 随机]
> - `自定义序列`：当排序方式为“自定义”时，定义的具体顺序（如：复合动作,孤立动作）
> 规则：
> - **稳定排序**：严格按数组顺序逐层排序。
> - **随机排序**：允许作为最后一层策略。
> - **沉底处理**：自定义排序未覆盖的值统一放到最后。
> 示例：[
>   {"dim":"动作构造", "order":"自定义", "seq":"复合动作,孤立动作"}, 
>   {"dim":"动作难度", "order":"降序"}
> ]
> 来源：运营后台配置
